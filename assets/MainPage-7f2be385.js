import{C as y,p as kr,b as E,u as St,a as Ir,A as _,D as Be,c as Z,s as Pr,g as Lr,S as Ne,i as G,d as qe,e as bt,f as lt,h as Ee,P as R,j as ut,k as Dr,l as pn,m as re,V as ne,n as ae,o as B,t as vt,q as Or,r as xr,R as hn,v as Ur,w as yn,x as gn,y as Rr,z as Br,B as et,T as Nr,E as dt,F as mn,G as Fr,H as Mr,I as Kr,J as z,K as Rt,L as Se,M as jr,N as Hr,O as Ct,Q as ce,U as qr,W as wn,X as Vr,Y as le,Z as zr,_ as ue,$ as Tt,a0 as Sn,a1 as bn,a2 as vn,a3 as Jr,a4 as Gr,a5 as Cn,a6 as Wr,a7 as Yr,a8 as Tn,a9 as _t,aa as Xr,ab as Qr,ac as _n,ad as Zr,ae as es,af as J,ag as ts,ah as ns,ai as rs,aj as ss,ak as Ae,al as Et,am as tt,an as is,ao as os,ap as Bt,aq as En,ar as as,as as Nt,at as cs,au as ls,av as nt,aw as $n,ax as An,ay as us,az as Ft,aA as ds,aB as fs,aC as x,aD as ps,aE as T,aF as M,aG as O,aH as K,aI as U,aJ as N,aK as S,aL as C,aM as hs,aN as I,aO as ke,aP as Ie,aQ as ys,aR as gs,aS as rt}from"./index-028323f8.js";const oe={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(oe);class pe extends Error{constructor(t){super();let n=t.message,r=`Error Code: ${t.code}`,s=this.stack;if(s)r+=`Stack Trace:
${s}`;else try{throw new Error}catch(o){s=o.stack}n+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${r}`,this.message=n,this.code=t.code,this.parameter=t.parameter?t.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class ms extends pe{constructor(t,n=""){super({code:oe.MISSING_PARAMETER,message:n,parameter:t}),this.name="MissingParametersError"}}class Mt extends pe{constructor(t=""){super({code:oe.INVALID_DID_ERROR,message:t}),this.name="InvalidDIDError"}}class Pe extends pe{constructor(t){const n=`Failed to login: ${t}`;super({code:oe.LOGIN_FAILED_ERROR,message:n}),this.message=n,this.name="LoginFailedError"}}class Kt extends pe{constructor(t="Unable to decrypt cipher object."){super({code:oe.FAILED_DECRYPTION_ERROR,message:t}),this.message=t,this.name="FailedDecryptionError"}}class ft extends pe{constructor(t){super({code:oe.INVALID_STATE,message:t}),this.message=t,this.name="InvalidStateError"}}class kn extends pe{constructor(t){super({code:oe.INVALID_STATE,message:t}),this.message=t,this.name="NoSessionDataError"}}function xe(e,t=!1){switch(e.type){case y.BoolTrue:return!0;case y.BoolFalse:return!1;case y.Int:case y.UInt:return t?e.value.toString():e.value;case y.Buffer:return`0x${E(e.buffer)}`;case y.OptionalNone:return null;case y.OptionalSome:return be(e.value);case y.ResponseErr:return be(e.value);case y.ResponseOk:return be(e.value);case y.PrincipalStandard:case y.PrincipalContract:return kr(e);case y.List:return e.list.map(r=>be(r));case y.Tuple:const n={};return Object.keys(e.data).forEach(r=>{n[r]=be(e.data[r])}),n;case y.StringASCII:return e.data;case y.StringUTF8:return e.data}}function be(e){switch(e.type){case y.ResponseErr:return{type:Q(e),value:xe(e,!0),success:!1};case y.ResponseOk:return{type:Q(e),value:xe(e,!0),success:!0};default:return{type:Q(e),value:xe(e,!0)}}}function Q(e){switch(e.type){case y.BoolTrue:case y.BoolFalse:return"bool";case y.Int:return"int";case y.UInt:return"uint";case y.Buffer:return`(buff ${e.buffer.length})`;case y.OptionalNone:return"(optional none)";case y.OptionalSome:return`(optional ${Q(e.value)})`;case y.ResponseErr:return`(response UnknownType ${Q(e.value)})`;case y.ResponseOk:return`(response ${Q(e.value)} UnknownType)`;case y.PrincipalStandard:case y.PrincipalContract:return"principal";case y.List:return`(list ${e.list.length} ${e.list.length?Q(e.list[0]):"UnknownType"})`;case y.Tuple:return`(tuple ${Object.keys(e.data).map(t=>`(${t} ${Q(e.data[t])})`).join(" ")})`;case y.StringASCII:return`(string-ascii ${Ir(e.data).length})`;case y.StringUTF8:return`(string-utf8 ${St(e.data).length})`}}function $t(){return{type:re.MessageSignature,data:E(new Uint8Array(hn))}}function In(e,t,n,r){const s=bt(0,e,1,[lt(t)]).hash160,o=Ee(lt(t))?R.Compressed:R.Uncompressed;return{hashMode:e,signer:s,nonce:G(n,!1),fee:G(r,!1),keyEncoding:o,signature:$t()}}function Ce(e){return"signature"in e}function jt(e){const t=ut(e);return t.nonce=0,t.fee=0,Ce(t)?t.signature=$t():t.fields=[],{...t,nonce:BigInt(0),fee:BigInt(0)}}function ws(e){const t=[e.hashMode,B(e.signer),ae(e.nonce,!1,8),ae(e.fee,!1,8),e.keyEncoding,Ur(e.signature)];return qe(t)}function Ss(e){const t=[e.hashMode,B(e.signer),ae(e.nonce,!1,8),ae(e.fee,!1,8)],n=yn(e.fields);t.push(gn(n));const r=new Uint8Array(2);return Rr(r,e.signaturesRequired,0),t.push(r),qe(t)}function bs(e,t){const n=E(t.readBytes(20)),r=BigInt(`0x${E(t.readBytes(8))}`),s=BigInt(`0x${E(t.readBytes(8))}`),o=t.readUInt8Enum(R,a=>{throw new Be(`Could not parse ${a} as PubKeyEncoding`)});if(e===Z.SerializeP2WPKH&&o!=R.Compressed)throw new Be("Failed to parse singlesig spending condition: incomaptible hash mode and key encoding");const i=Dr(t);return{hashMode:e,signer:n,nonce:r,fee:s,keyEncoding:o,signature:i}}function vs(e,t){const n=E(t.readBytes(20)),r=BigInt("0x"+E(t.readBytes(8))),s=BigInt("0x"+E(t.readBytes(8))),o=pn(t,re.TransactionAuthField).values;let i=!1,a=0;for(const u of o)switch(u.contents.type){case re.PublicKey:Ee(u.contents)||(i=!0);break;case re.MessageSignature:if(u.pubKeyEncoding===R.Uncompressed&&(i=!0),a+=1,a===65536)throw new ne("Failed to parse multisig spending condition: too many signatures");break}const l=t.readUInt16BE();if(i&&e===Z.SerializeP2SH)throw new ne("Uncompressed keys are not allowed in this hash mode");return{hashMode:e,signer:n,nonce:r,fee:s,fields:o,signaturesRequired:l}}function st(e){return Ce(e)?ws(e):Ss(e)}function it(e){const t=e.readUInt8Enum(Z,n=>{throw new Be(`Could not parse ${n} as AddressHashMode`)});return t===Z.SerializeP2PKH||t===Z.SerializeP2WPKH?bs(t,e):vs(t,e)}function Pn(e,t,n,r){const o=e+E(new Uint8Array([t]))+E(ae(n,!1,8))+E(ae(r,!1,8));if(B(o).byteLength!==49)throw Error("Invalid signature hash length");return vt(B(o))}function Ln(e,t,n){const r=33+hn,s=Ee(t)?R.Compressed:R.Uncompressed,o=e+Or(s.toString(16))+n.data,i=B(o);if(i.byteLength>r)throw Error("Invalid signature hash length");return vt(i)}function Cs(e,t,n,r,s){const o=Pn(e,t,n,r),i=Pr(s,o),a=Lr(s),l=Ln(o,a,i);return{nextSig:i,nextSigHash:l}}function Dn(e,t,n,r,s,o){const i=Pn(e,t,n,r),a=lt(Br(i,o,s)),l=Ln(i,a,o);return{pubKey:a,nextSigHash:l}}function Ts(){const e=In(Z.SerializeP2PKH,"",0,0);return e.signer=xr().hash160,e.keyEncoding=R.Compressed,e.signature=$t(),e}function Ht(e,t,n){return Ce(e)?_s(e,t,n):Es(e,t,n)}function _s(e,t,n){const{pubKey:r,nextSigHash:s}=Dn(t,n,e.fee,e.nonce,e.keyEncoding,e.signature),o=bt(0,e.hashMode,1,[r]).hash160;if(o!==e.signer)throw new ne(`Signer hash does not equal hash of public key(s): ${o} != ${e.signer}`);return s}function Es(e,t,n){const r=[];let s=t,o=!1,i=0;for(const l of e.fields){let u;switch(l.contents.type){case re.PublicKey:Ee(l.contents)||(o=!0),u=l.contents;break;case re.MessageSignature:l.pubKeyEncoding===R.Uncompressed&&(o=!0);const{pubKey:d,nextSigHash:p}=Dn(s,n,e.fee,e.nonce,l.pubKeyEncoding,l.contents);if(s=p,u=d,i+=1,i===65536)throw new ne("Too many signatures");break}r.push(u)}if(i!==e.signaturesRequired)throw new ne("Incorrect number of signatures");if(o&&e.hashMode===Z.SerializeP2SH)throw new ne("Uncompressed keys are not allowed in this hash mode");const a=bt(0,e.hashMode,e.signaturesRequired,r).hash160;if(a!==e.signer)throw new ne(`Signer hash does not equal hash of public key(s): ${a} != ${e.signer}`);return s}function On(e){return{authType:_.Standard,spendingCondition:e}}function xn(e,t){return{authType:_.Sponsored,spendingCondition:e,sponsorSpendingCondition:t||In(Z.SerializeP2PKH,"0".repeat(66),0,0)}}function qt(e){if(e.spendingCondition)switch(e.authType){case _.Standard:return On(jt(e.spendingCondition));case _.Sponsored:return xn(jt(e.spendingCondition),Ts());default:throw new Ne("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}function $s(e,t){switch(e.authType){case _.Standard:return Ht(e.spendingCondition,t,_.Standard);case _.Sponsored:return Ht(e.spendingCondition,t,_.Standard);default:throw new Ne("Invalid origin auth type")}}function As(e,t){switch(e.authType){case _.Standard:const n={...e.spendingCondition,fee:G(t,!1)};return{...e,spendingCondition:n};case _.Sponsored:const r={...e.sponsorSpendingCondition,fee:G(t,!1)};return{...e,sponsorSpendingCondition:r}}}function ks(e,t){const n={...e.spendingCondition,nonce:G(t,!1)};return{...e,spendingCondition:n}}function Is(e,t){const n={...e.sponsorSpendingCondition,nonce:G(t,!1)};return{...e,sponsorSpendingCondition:n}}function Ps(e,t){const n={...t,nonce:G(t.nonce,!1),fee:G(t.fee,!1)};return{...e,sponsorSpendingCondition:n}}function Ls(e){const t=[];switch(t.push(e.authType),e.authType){case _.Standard:t.push(st(e.spendingCondition));break;case _.Sponsored:t.push(st(e.spendingCondition)),t.push(st(e.sponsorSpendingCondition));break}return qe(t)}function Ds(e){const t=e.readUInt8Enum(_,r=>{throw new Be(`Could not parse ${r} as AuthType`)});let n;switch(t){case _.Standard:return n=it(e),On(n);case _.Sponsored:n=it(e);const r=it(e);return xn(n,r)}}class Os{constructor(t,n,r,s,o,i,a){if(this.version=t,this.auth=n,"amount"in r?this.payload={...r,amount:G(r.amount,!1)}:this.payload=r,this.chainId=a??Mr,this.postConditionMode=o??mn.Deny,this.postConditions=s??yn([]),i)this.anchorMode=Kr(i);else switch(r.payloadType){case z.Coinbase:case z.CoinbaseToAltRecipient:case z.NakamotoCoinbase:case z.PoisonMicroblock:case z.TenureChange:this.anchorMode=dt.OnChainOnly;break;case z.ContractCall:case z.SmartContract:case z.VersionedSmartContract:case z.TokenTransfer:this.anchorMode=dt.Any;break}}signBegin(){const t=ut(this);return t.auth=qt(t.auth),t.txid()}verifyBegin(){const t=ut(this);return t.auth=qt(t.auth),t.txid()}verifyOrigin(){return $s(this.auth,this.verifyBegin())}signNextOrigin(t,n){if(this.auth.spendingCondition===void 0)throw new Error('"auth.spendingCondition" is undefined');if(this.auth.authType===void 0)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,t,_.Standard,n)}signNextSponsor(t,n){if(this.auth.authType===_.Sponsored)return this.signAndAppend(this.auth.sponsorSpendingCondition,t,_.Sponsored,n);throw new Error('"auth.sponsorSpendingCondition" is undefined')}appendPubkey(t){const n=this.auth.spendingCondition;if(n&&!Ce(n)){const r=Ee(t);n.fields.push(Rt(r?R.Compressed:R.Uncompressed,t))}else throw new Error("Can't append public key to a singlesig condition")}signAndAppend(t,n,r,s){const{nextSig:o,nextSigHash:i}=Cs(n,r,t.fee,t.nonce,s);if(Ce(t))t.signature=o;else{const a=E(s.data).endsWith("01");t.fields.push(Rt(a?R.Compressed:R.Uncompressed,o))}return i}txid(){const t=this.serialize();return vt(t)}setSponsor(t){if(this.auth.authType!=_.Sponsored)throw new Ne("Cannot sponsor sign a non-sponsored transaction");this.auth=Ps(this.auth,t)}setFee(t){this.auth=As(this.auth,t)}setNonce(t){this.auth=ks(this.auth,t)}setSponsorNonce(t){if(this.auth.authType!=_.Sponsored)throw new Ne("Cannot sponsor sign a non-sponsored transaction");this.auth=Is(this.auth,t)}serialize(){if(this.version===void 0)throw new Se('"version" is undefined');if(this.chainId===void 0)throw new Se('"chainId" is undefined');if(this.auth===void 0)throw new Se('"auth" is undefined');if(this.anchorMode===void 0)throw new Se('"anchorMode" is undefined');if(this.payload===void 0)throw new Se('"payload" is undefined');const t=[];t.push(this.version);const n=new Uint8Array(4);return jr(n,this.chainId,0),t.push(n),t.push(Ls(this.auth)),t.push(this.anchorMode),t.push(this.postConditionMode),t.push(gn(this.postConditions)),t.push(Hr(this.payload)),qe(t)}}function xs(e){let t;typeof e=="string"?e.slice(0,2).toLowerCase()==="0x"?t=new et(B(e.slice(2))):t=new et(B(e)):e instanceof Uint8Array?t=new et(e):t=e;const n=t.readUInt8Enum(Nr,u=>{throw new Error(`Could not parse ${u} as TransactionVersion`)}),r=t.readUInt32BE(),s=Ds(t),o=t.readUInt8Enum(dt,u=>{throw new Error(`Could not parse ${u} as AnchorMode`)}),i=t.readUInt8Enum(mn,u=>{throw new Error(`Could not parse ${u} as PostConditionMode`)}),a=pn(t,re.PostCondition),l=Fr(t);return new Os(n,s,l,a,i,o,r)}const Us="https://browser.blockstack.org/auth",Rs={"@type":"Person","@context":"http://schema.org"},Un=["store_write"],Bs="blockstack-session";class Ve{constructor(t=Un.slice(),n=(a=>(a=Ct("location",{returnEmptyObject:!0}))==null?void 0:a.origin)(),r="",s="/manifest.json",o=void 0,i=Us){this.appDomain=n,this.scopes=t,this.redirectPath=r,this.manifestPath=s,this.coreNode=o,this.authenticatorURL=i}redirectURI(){return`${this.appDomain}${this.redirectPath}`}manifestURI(){return`${this.appDomain}${this.manifestPath}`}}function Ns(){return typeof crypto<"u"&&typeof crypto.subtle<"u"}const Fs='Crypto lib not found. Either the WebCrypto "crypto.subtle" or Node.js "crypto" module must be available.';async function Ms(){if(Ns())return{lib:crypto.subtle,name:"subtleCrypto"};try{return{lib:require("crypto"),name:"nodeCrypto"}}catch{throw new Error(Fs)}}class Ks{constructor(t,n){this.createCipher=t,this.createDecipher=n}async encrypt(t,n,r,s){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);const o=this.createCipher(t,n,r),i=new Uint8Array(ce(o.update(s),o.final()));return Promise.resolve(i)}async decrypt(t,n,r,s){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);const o=this.createDecipher(t,n,r),i=new Uint8Array(ce(o.update(s),o.final()));return Promise.resolve(i)}}class js{constructor(t){this.subtleCrypto=t}async encrypt(t,n,r,s){let o,i;if(t==="aes-128-cbc")o="AES-CBC",i=128;else if(t==="aes-256-cbc")o="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["encrypt"]),l=await this.subtleCrypto.encrypt({name:o,iv:r},a,s);return new Uint8Array(l)}async decrypt(t,n,r,s){let o,i;if(t==="aes-128-cbc")o="AES-CBC",i=128;else if(t==="aes-256-cbc")o="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["decrypt"]),l=await this.subtleCrypto.decrypt({name:o,iv:r},a,s);return new Uint8Array(l)}}async function Rn(){const e=await Ms();return e.name==="subtleCrypto"?new js(e.lib):new Ks(e.lib.createCipheriv,e.lib.createDecipheriv)}const Hs=qr,qs="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Vs=Hs(qs);const zs=wn(Vs);function Js(e){return Vr(e)}function Bn(e){return le(e)}function Gs(e){return zr(e)}const Ws=0;ue.hmacSha256Sync=(e,...t)=>{const n=Tt.create(le,e);return t.forEach(r=>n.update(r)),n.digest()};function Ys(){return E(ue.randomPrivateKey())}function Xs(e){const t=le(le(e));return zs.encode(ce(e,t).slice(0,e.length+4))}function Qs(e,t){return Xs(ce(new Uint8Array([e]),t.slice(0,20)))}function Nn(e,t=Ws){const n=typeof e=="string"?B(e):e,r=Js(Bn(n));return Qs(t,r)}function Fn(e){const t=Sn(e);return E(bn(t.slice(0,32),!0))}function Zs(e){return ue.isValidPrivateKey(Sn(e))}ue.hmacSha256Sync=(e,...t)=>{const n=Tt.create(le,e);return t.forEach(r=>n.update(r)),n.digest()};var Fe;(function(e){e.InvalidFormat="InvalidFormat",e.IsNotPoint="IsNotPoint"})(Fe||(Fe={}));async function ei(e,t,n){return await(await Rn()).encrypt("aes-256-cbc",t,e,n)}async function ti(e,t,n){return await(await Rn()).decrypt("aes-256-cbc",t,e,n)}function Mn(e,t){return Tt(le,e,t)}function ni(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function Kn(e){const t=Gs(e);return{encryptionKey:t.slice(0,32),hmacKey:t.slice(32)}}function ri(e){return e.match(/^[0-9a-f]+$/i)!==null}function si(e){const t={result:!1,reason_data:"Invalid public key format",reason:Fe.InvalidFormat},n={result:!1,reason_data:"Public key is not a point",reason:Fe.IsNotPoint};if(e.length!==66&&e.length!==130)return t;const r=e.slice(0,2);if(e.length===130&&r!=="04"||e.length===66&&r!=="02"&&r!=="03"||!ri(e))return t;try{return Yr.fromHex(e).assertValidity(),{result:!0,reason_data:null,reason:null}}catch{return n}}async function ii(e,t,n,r){const s=si(e);if(!s.result)throw s;const o=ue.randomPrivateKey(),i=bn(o,!0);let a=vn(o,e,!0);a=a.slice(1);const l=Kn(a),u=ue.randomBytes(16),d=await ei(u,l.encryptionKey,t),p=ce(u,i,d),w=Mn(l.hmacKey,p);let b;if(!r||r==="hex")b=E(d);else if(r==="base64")b=Jr(d);else throw new Error(`Unexpected cipherTextEncoding "${r}"`);const g={iv:E(u),ephemeralPK:E(i),cipherText:b,mac:E(w),wasString:n};return r&&r!=="hex"&&(g.cipherTextEncoding=r),g}async function jn(e,t){if(!t.ephemeralPK)throw new Kt("Unable to get public key from cipher object. You might be trying to decrypt an unencrypted object.");const n=t.ephemeralPK;let r=vn(e,n,!0);r=r.slice(1);const s=Kn(r),o=B(t.iv);let i;if(!t.cipherTextEncoding||t.cipherTextEncoding==="hex")i=B(t.cipherText);else if(t.cipherTextEncoding==="base64")i=Gr(t.cipherText);else throw new Error(`Unexpected cipherTextEncoding "${t.cipherText}"`);const a=ce(o,B(n),i),l=Mn(s.hmacKey,a),u=B(t.mac);if(!ni(u,l))throw new Kt("Decryption failed: failure in MAC check");const d=await ti(o,s.encryptionKey,i);return t.wasString?Cn(d):d}function oi(e,t){const n=typeof t=="string"?St(t):t,r=Fn(e),s=Bn(n),o=Wr(s,e);return{signature:E(o),publicKey:r}}async function ai(e,t){const n=Object.assign({},t);let r;if(!n.publicKey){if(!n.privateKey)throw new Error("Either public key or private key must be supplied for encryption.");n.publicKey=Fn(n.privateKey)}const s=typeof n.wasString=="boolean"?n.wasString:typeof e=="string",o=typeof e=="string"?St(e):e,i=await ii(n.publicKey,o,s,n.cipherTextEncoding);let a=JSON.stringify(i);if(n.sign){typeof n.sign=="string"?r=n.sign:r||(r=n.privateKey);const l=oi(r,a),u={signature:l.signature,publicKey:l.publicKey,cipherText:a};a=JSON.stringify(u)}return a}function ci(e,t){const n=Object.assign({},t);if(!n.privateKey)throw new Error("Private key is required for decryption.");try{const r=JSON.parse(e);return jn(n.privateKey,r)}catch(r){throw r instanceof SyntaxError?new Error("Failed to parse encrypted content JSON. The content may not be encrypted. If using getFile, try passing { decrypt: false }."):r}}var P={},de={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.decode=D.encode=D.unescape=D.escape=D.pad=void 0;const Hn=Tn;function At(e){return`${e}${"=".repeat(4-(e.length%4||4))}`}D.pad=At;function qn(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}D.escape=qn;function Vn(e){return At(e).replace(/-/g,"+").replace(/_/g,"/")}D.unescape=Vn;function li(e){return qn((0,Hn.fromByteArray)(new TextEncoder().encode(e)))}D.encode=li;function ui(e){return new TextDecoder().decode((0,Hn.toByteArray)(At(Vn(e))))}D.decode=ui;var ze={},Je={};const di=_t(Xr),fi=_t(Qr);var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.joseToDer=fe.derToJose=void 0;const zn=Tn,Jn=D;function ot(e){return(e/8|0)+(e%8===0?0:1)}const pi={ES256:ot(256),ES384:ot(384),ES512:ot(521)};function Gn(e){const t=pi[e];if(t)return t;throw new Error(`Unknown algorithm "${e}"`)}const Me=128,Wn=0,hi=32,yi=16,gi=2,Yn=yi|hi|Wn<<6,Ke=gi|Wn<<6;function Xn(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return(0,zn.toByteArray)((0,Jn.pad)(e));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function mi(e,t){const n=Xn(e),r=Gn(t),s=r+1,o=n.length;let i=0;if(n[i++]!==Yn)throw new Error('Could not find expected "seq"');let a=n[i++];if(a===(Me|1)&&(a=n[i++]),o-i<a)throw new Error(`"seq" specified length of "${a}", only "${o-i}" remaining`);if(n[i++]!==Ke)throw new Error('Could not find expected "int" for "r"');const l=n[i++];if(o-i-2<l)throw new Error(`"r" specified length of "${l}", only "${o-i-2}" available`);if(s<l)throw new Error(`"r" specified length of "${l}", max of "${s}" is acceptable`);const u=i;if(i+=l,n[i++]!==Ke)throw new Error('Could not find expected "int" for "s"');const d=n[i++];if(o-i!==d)throw new Error(`"s" specified length of "${d}", expected "${o-i}"`);if(s<d)throw new Error(`"s" specified length of "${d}", max of "${s}" is acceptable`);const p=i;if(i+=d,i!==o)throw new Error(`Expected to consume entire array, but "${o-i}" bytes remain`);const w=r-l,b=r-d,g=new Uint8Array(w+l+b+d);for(i=0;i<w;++i)g[i]=0;g.set(n.subarray(u+Math.max(-w,0),u+l),i),i=r;for(const $=i;i<$+b;++i)g[i]=0;return g.set(n.subarray(p+Math.max(-b,0),p+d),i),(0,Jn.escape)((0,zn.fromByteArray)(g))}fe.derToJose=mi;function Vt(e,t,n){let r=0;for(;t+r<n&&e[t+r]===0;)++r;return e[t+r]>=Me&&--r,r}function wi(e,t){e=Xn(e);const n=Gn(t),r=e.length;if(r!==n*2)throw new TypeError(`"${t}" signatures must be "${n*2}" bytes, saw "${r}"`);const s=Vt(e,0,n),o=Vt(e,n,e.length),i=n-s,a=n-o,l=1+1+i+1+1+a,u=l<Me,d=new Uint8Array((u?2:3)+l);let p=0;return d[p++]=Yn,u?d[p++]=l:(d[p++]=Me|1,d[p++]=l&255),d[p++]=Ke,d[p++]=i,s<0?(d[p++]=0,d.set(e.subarray(0,n),p),p+=n):(d.set(e.subarray(s,n),p),p+=n-s),d[p++]=Ke,d[p++]=a,o<0?(d[p++]=0,d.set(e.subarray(n),p)):d.set(e.subarray(n+o),p),d}fe.joseToDer=wi;var W={};Object.defineProperty(W,"__esModule",{value:!0});W.InvalidTokenError=W.MissingParametersError=void 0;class Si extends Error{constructor(t){super(),this.name="MissingParametersError",this.message=t||""}}W.MissingParametersError=Si;class bi extends Error{constructor(t){super(),this.name="InvalidTokenError",this.message=t||""}}W.InvalidTokenError=bi;Object.defineProperty(Je,"__esModule",{value:!0});Je.SECP256K1Client=void 0;const vi=di,Ci=_n,Ue=fi,zt=fe,Jt=W,Gt=Zr;Ue.utils.hmacSha256Sync=(e,...t)=>{const n=vi.hmac.create(Ci.sha256,e);return t.forEach(r=>n.update(r)),n.digest()};class Qn{static derivePublicKey(t,n=!0){return t.length===66&&(t=t.slice(0,64)),t.length<64&&(t=t.padStart(64,"0")),(0,Gt.bytesToHex)(Ue.getPublicKey(t,n))}static signHash(t,n,r="jose"){if(!t||!n)throw new Jt.MissingParametersError("a signing input hash and private key are all required");const s=Ue.signSync(t,n.slice(0,64),{der:!0,canonical:!1});if(r==="der")return(0,Gt.bytesToHex)(s);if(r==="jose")return(0,zt.derToJose)(s,"ES256");throw Error("Invalid signature format")}static loadSignature(t){return(0,zt.joseToDer)(t,"ES256")}static verifyHash(t,n,r){if(!t||!n||!r)throw new Jt.MissingParametersError("a signing input hash, der signature, and public key are all required");return Ue.verify(n,t,r,{strict:!1})}}Je.SECP256K1Client=Qn;Qn.algorithmName="ES256K";(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.cryptoClients=e.SECP256K1Client=void 0;const t=Je;Object.defineProperty(e,"SECP256K1Client",{enumerable:!0,get:function(){return t.SECP256K1Client}});const n={ES256K:t.SECP256K1Client};e.cryptoClients=n})(ze);var se={};const Ti=_t(es);var _i=J&&J.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(p){i(p)}}function l(d){try{u(r.throw(d))}catch(p){i(p)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(se,"__esModule",{value:!0});se.hashSha256Async=se.hashSha256=void 0;const Ei=_n;function Zn(e){return(0,Ei.sha256)(e)}se.hashSha256=Zn;function $i(e){return _i(this,void 0,void 0,function*(){try{if(typeof crypto<"u"&&typeof crypto.subtle<"u"){const n=typeof e=="string"?new TextEncoder().encode(e):e,r=yield crypto.subtle.digest("SHA-256",n);return new Uint8Array(r)}else{const n=Ti;if(!n.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(n.createHash("sha256").update(e).digest())}}catch(t){return console.log(t),console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(Zn(e))}})}se.hashSha256Async=$i;var Ai=J&&J.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(p){i(p)}}function l(d){try{u(r.throw(d))}catch(p){i(p)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(de,"__esModule",{value:!0});de.TokenSigner=de.createUnsecuredToken=void 0;const pt=D,Wt=ze,ki=W,Yt=se;function ht(e,t){const n=[],r=pt.encode(JSON.stringify(t));n.push(r);const s=pt.encode(JSON.stringify(e));return n.push(s),n.join(".")}function Ii(e){return ht(e,{typ:"JWT",alg:"none"})+"."}de.createUnsecuredToken=Ii;class Pi{constructor(t,n){if(!(t&&n))throw new ki.MissingParametersError("a signing algorithm and private key are required");if(typeof t!="string")throw new Error("signing algorithm parameter must be a string");if(t=t.toUpperCase(),!Wt.cryptoClients.hasOwnProperty(t))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=Wt.cryptoClients[t],this.rawPrivateKey=n}header(t={}){const n={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},n,t)}sign(t,n=!1,r={}){const s=this.header(r),o=ht(t,s),i=(0,Yt.hashSha256)(o);return this.createWithSignedHash(t,n,s,o,i)}signAsync(t,n=!1,r={}){return Ai(this,void 0,void 0,function*(){const s=this.header(r),o=ht(t,s),i=yield(0,Yt.hashSha256Async)(o);return this.createWithSignedHash(t,n,s,o,i)})}createWithSignedHash(t,n,r,s,o){const i=this.cryptoClient.signHash(o,this.rawPrivateKey);return n?{header:[pt.encode(JSON.stringify(r))],payload:JSON.stringify(t),signature:[i]}:[s,i].join(".")}}de.TokenSigner=Pi;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.TokenVerifier=void 0;const Li=D,Xt=ze,Di=W,Le=se;class Oi{constructor(t,n){if(!(t&&n))throw new Di.MissingParametersError("a signing algorithm and public key are required");if(typeof t!="string")throw"signing algorithm parameter must be a string";if(t=t.toUpperCase(),!Xt.cryptoClients.hasOwnProperty(t))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=Xt.cryptoClients[t],this.rawPublicKey=n}verify(t){return typeof t=="string"?this.verifyCompact(t,!1):typeof t=="object"?this.verifyExpanded(t,!1):!1}verifyAsync(t){return typeof t=="string"?this.verifyCompact(t,!0):typeof t=="object"?this.verifyExpanded(t,!0):Promise.resolve(!1)}verifyCompact(t,n){const r=t.split("."),s=r[0]+"."+r[1],o=i=>{const a=this.cryptoClient.loadSignature(r[2]);return this.cryptoClient.verifyHash(i,a,this.rawPublicKey)};if(n)return(0,Le.hashSha256Async)(s).then(i=>o(i));{const i=(0,Le.hashSha256)(s);return o(i)}}verifyExpanded(t,n){const r=[t.header.join("."),Li.encode(t.payload)].join(".");let s=!0;const o=i=>(t.signature.map(a=>{const l=this.cryptoClient.loadSignature(a);this.cryptoClient.verifyHash(i,l,this.rawPublicKey)||(s=!1)}),s);if(n)return(0,Le.hashSha256Async)(r).then(i=>o(i));{const i=(0,Le.hashSha256)(r);return o(i)}}}Ge.TokenVerifier=Oi;var We={};Object.defineProperty(We,"__esModule",{value:!0});We.decodeToken=void 0;const De=D;function xi(e){if(typeof e=="string"){const t=e.split("."),n=JSON.parse(De.decode(t[0])),r=JSON.parse(De.decode(t[1])),s=t[2];return{header:n,payload:r,signature:s}}else if(typeof e=="object"){if(typeof e.payload!="string")throw new Error("Expected token payload to be a base64 or json string");let t=e.payload;e.payload[0]!=="{"&&(t=De.decode(t));const n=[];return e.header.map(r=>{const s=JSON.parse(De.decode(r));n.push(s)}),{header:n,payload:JSON.parse(t),signature:e.signature}}}We.decodeToken=xi;(function(e){var t=J&&J.__createBinding||(Object.create?function(r,s,o,i){i===void 0&&(i=o);var a=Object.getOwnPropertyDescriptor(s,o);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,i,a)}:function(r,s,o,i){i===void 0&&(i=o),r[i]=s[o]}),n=J&&J.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(de,e),n(Ge,e),n(We,e),n(W,e),n(ze,e)})(P);function Ui(e){return`did:btc-addr:${e}`}function Ri(e){const t=e.split(":");if(t.length!==3)throw new Mt("Decentralized IDs must have 3 parts");if(t[0].toLowerCase()!=="did")throw new Mt('Decentralized IDs must start with "did"');return t[1].toLowerCase()}function er(e){if(e)return Ri(e)==="btc-addr"?e.split(":")[2]:void 0}const Bi="1.4.0";function Ni(){return Ys()}function Fi(e,t,n,r=Un.slice(),s,o=ns().getTime(),i={}){const a=b=>{const g=Ct("location",{throwIfUnavailable:!0,usageDesc:`makeAuthRequest([${b}=undefined])`});return g==null?void 0:g.origin};t||(t=`${a("redirectURI")}/`),n||(n=`${a("manifestURI")}/manifest.json`),s||(s=a("appDomain"));const l=Object.assign({},i,{jti:ts(),iat:Math.floor(new Date().getTime()/1e3),exp:Math.floor(o/1e3),iss:null,public_keys:[],domain_name:s,manifest_uri:n,redirect_uri:t,version:Bi,do_not_include_profile:!0,supports_hub_url:!0,scopes:r}),u=P.SECP256K1Client.derivePublicKey(e);l.public_keys=[u];const d=Nn(u);return l.iss=Ui(d),new P.TokenSigner("ES256k",e).sign(l)}async function Qt(e,t){const n=Cn(B(t)),r=JSON.parse(n),s=await jn(e,r);if(typeof s!="string")throw new Error("Unable to correctly decrypt private key");return s}function Mi(e){const t=P.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");const n=t.public_keys;if(n.length===1){const r=n[0];try{return new P.TokenVerifier("ES256k",r).verify(e)}catch{return!1}}else throw new Error("Multiple public keys are not supported")}function Ki(e){const t=P.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");const n=t.public_keys,r=er(t.iss);if(n.length===1){if(Nn(n[0])===r)return!0}else throw new Error("Multiple public keys are not supported");return!1}function ji(e){const t=P.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");if(t.iat){if(typeof t.iat!="number")return!1;const n=new Date(t.iat*1e3);return!(new Date().getTime()<n.getTime())}else return!0}function Hi(e){const t=P.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");if(t.exp){if(typeof t.exp!="number")return!1;const n=new Date(t.exp*1e3);return!(new Date().getTime()>n.getTime())}else return!0}async function qi(e){return(await Promise.all([Hi(e),ji(e),Mi(e),Ki(e)])).every(n=>n)}const Zt="1.0.0";class ee{constructor(t){this.version=Zt,this.userData=t.userData,this.transitKey=t.transitKey,this.etags=t.etags?t.etags:{}}static fromJSON(t){if(t.version!==Zt)throw new ft(`JSON data version ${t.version} not supported by SessionData`);const n={coreNode:t.coreNode,userData:t.userData,transitKey:t.transitKey,etags:t.etags};return new ee(n)}toString(){return JSON.stringify(this)}}class tr{constructor(t){if(t){const n=new ee(t);this.setSessionData(n)}}getSessionData(){throw new Error("Abstract class")}setSessionData(t){throw new Error("Abstract class")}deleteSessionData(){throw new Error("Abstract class")}}class en extends tr{constructor(t){super(t),this.sessionData||this.setSessionData(new ee({}))}getSessionData(){if(!this.sessionData)throw new kn("No session data was found.");return this.sessionData}setSessionData(t){return this.sessionData=t,!0}deleteSessionData(){return this.setSessionData(new ee({})),!0}}class tn extends tr{constructor(t){if(super(t),t&&t.storeOptions&&t.storeOptions.localStorageKey&&typeof t.storeOptions.localStorageKey=="string"?this.key=t.storeOptions.localStorageKey:this.key=Bs,!localStorage.getItem(this.key)){const r=new ee({});this.setSessionData(r)}}getSessionData(){const t=localStorage.getItem(this.key);if(!t)throw new kn("No session data was found in localStorage");const n=JSON.parse(t);return ee.fromJSON(n)}setSessionData(t){return localStorage.setItem(this.key,t.toString()),!0}deleteSessionData(){return localStorage.removeItem(this.key),this.setSessionData(new ee({})),!0}}function Vi(e,t){const n=P.decodeToken(e),r=n.payload;if(typeof r=="string")throw new Error("Unexpected token payload type of string");if(r.hasOwnProperty("subject")&&r.subject){if(!r.subject.hasOwnProperty("publicKey"))throw new Error("Token doesn't have a subject public key")}else throw new Error("Token doesn't have a subject");if(r.hasOwnProperty("issuer")&&r.issuer){if(!r.issuer.hasOwnProperty("publicKey"))throw new Error("Token doesn't have an issuer public key")}else throw new Error("Token doesn't have an issuer");if(!r.hasOwnProperty("claim"))throw new Error("Token doesn't have a claim");const s=r.issuer.publicKey,o=rs(s);if(t!==s){if(t!==o)throw new Error("Token issuer public key does not match the verifying value")}const i=new P.TokenVerifier(n.header.alg,s);if(!i)throw new Error("Invalid token verifier");if(!i.verify(e))throw new Error("Token verification failed");return n}function zi(e,t=null){let n;t?n=Vi(e,t):n=P.decodeToken(e);let r={};if(n.hasOwnProperty("payload")){const s=n.payload;if(typeof s=="string")throw new Error("Unexpected token payload type of string");s.hasOwnProperty("claim")&&(r=s.claim)}return r}const nn="_blockstackDidCheckEchoReply",Ji="echoReply",Gi="authContinuation";function Wi(e){return e?(/^[?#]/.test(e)?e.slice(1):e).split("&").reduce((n,r)=>{const[s,o]=r.split("=");return n[s]=o?decodeURIComponent(o.replace(/\+/g," ")):"",n},{}):{}}function Yi(){let e;if(typeof self<"u")e=self;else if(typeof window<"u")e=window;else return!1;if(!e.location||!e.localStorage)return!1;const t=e[nn];if(typeof t=="boolean")return t;const n=Wi(e.location.search),r=n[Ji];if(r){e[nn]=!0;const s=`echo-reply-${r}`;return e.localStorage.setItem(s,"success"),e.setTimeout(()=>{const o=n[Gi];e.location.href=o},10),!0}return!1}class Te{constructor(t){let n=!0;if(typeof window>"u"&&typeof self>"u"&&(n=!1),t&&t.appConfig)this.appConfig=t.appConfig;else if(n)this.appConfig=new Ve;else throw new ms("You need to specify options.appConfig");t&&t.sessionStore?this.store=t.sessionStore:n?t?this.store=new tn(t.sessionOptions):this.store=new tn:t?this.store=new en(t.sessionOptions):this.store=new en}makeAuthRequestToken(t,n,r,s,o,i=ss().getTime(),a={}){const l=this.appConfig;if(!l)throw new ft("Missing AppConfig");return t=t||this.generateAndStoreTransitKey(),n=n||l.redirectURI(),r=r||l.manifestURI(),s=s||l.scopes,o=o||l.appDomain,Fi(t,n,r,s,o,i,a)}generateAndStoreTransitKey(){const t=this.store.getSessionData(),n=Ni();return t.transitKey=n,this.store.setSessionData(t),n}getAuthResponseToken(){var r;const t=(r=Ct("location",{throwIfUnavailable:!0,usageDesc:"getAuthResponseToken"}))==null?void 0:r.search;return new URLSearchParams(t).get("authResponse")??""}isSignInPending(){try{if(Yi())return Ae.info("protocolEchoReply detected from isSignInPending call, the page is about to redirect."),!0}catch(t){Ae.error(`Error checking for protocol echo reply isSignInPending: ${t}`)}return!!this.getAuthResponseToken()}isUserSignedIn(){return!!this.store.getSessionData().userData}async handlePendingSignIn(t=this.getAuthResponseToken(),n=is()){const r=this.store.getSessionData();if(r.userData)throw new Pe("Existing user session found.");const s=this.store.getSessionData().transitKey;let o=this.appConfig&&this.appConfig.coreNode;o||(o=new Et().bnsLookupUrl);const i=P.decodeToken(t).payload;if(typeof i=="string")throw new Error("Unexpected token payload type of string");if(!await qi(t))throw new Pe("Invalid authentication response.");let l=i.private_key,u=i.core_token;if(tt(i.version,"1.1.0"))if(s!==void 0&&s!=null){if(i.private_key!==void 0&&i.private_key!==null)try{l=await Qt(s,i.private_key)}catch{if(Ae.warn("Failed decryption of appPrivateKey, will try to use as given"),!Zs(i.private_key))throw new Pe("Failed decrypting appPrivateKey. Usually means that the transit key has changed during login.")}if(u!=null)try{u=await Qt(s,u)}catch{Ae.info("Failed decryption of coreSessionToken, will try to use as given")}}else throw new Pe("Authenticating with protocol > 1.1.0 requires transit key, and none found.");let d=os,p;tt(i.version,"1.2.0")&&i.hubUrl!==null&&i.hubUrl!==void 0&&(d=i.hubUrl),tt(i.version,"1.3.0")&&i.associationToken!==null&&i.associationToken!==void 0&&(p=i.associationToken);const w={profile:i.profile,email:i.email,decentralizedID:i.iss,identityAddress:er(i.iss),appPrivateKey:l,coreSessionToken:u,authResponseToken:t,hubUrl:d,appPrivateKeyFromWalletSalt:i.appPrivateKeyFromWalletSalt,coreNode:i.blockstackAPIUrl,gaiaAssociationToken:p},b=i.profile_url;if(!w.profile&&b){const g=await n(b);if(!g.ok)w.profile=Object.assign({},Rs);else{const $=await g.text(),F=JSON.parse($);w.profile=zi(F[0].token)}}else w.profile=i.profile;return r.userData=w,this.store.setSessionData(r),w}loadUserData(){const t=this.store.getSessionData().userData;if(!t)throw new ft("No user data found. Did the user sign in?");return t}encryptContent(t,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),ai(t,r)}decryptContent(t,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),ci(t,r)}signUserOut(t){this.store.deleteSessionData(),t&&typeof location<"u"&&location.href&&(location.href=t)}}Te.prototype.makeAuthRequest=Te.prototype.makeAuthRequestToken;const Xi="connect-ui";let Re,nr,rr=!1,yt=!1;const Y=(e,t="")=>()=>{},Qi=(e,t)=>()=>{},Zi="{visibility:hidden}.hydrated{visibility:inherit}",rn={},eo=e=>e!=null,kt=e=>(e=typeof e,e==="object"||e==="function");function sr(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const to=(e,t,...n)=>{let r=null,s=!1,o=!1;const i=[],a=u=>{for(let d=0;d<u.length;d++)r=u[d],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!kt(r))&&(r=String(r)),s&&o?i[i.length-1].$text$+=r:i.push(s?gt(null,r):r),o=s)};if(a(n),t){const u=t.className||t.class;u&&(t.class=typeof u!="object"?u:Object.keys(u).filter(d=>u[d]).join(" "))}const l=gt(e,null);return l.$attrs$=t,i.length>0&&(l.$children$=i),l},gt=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n},no={},ro=e=>e&&e.$tag$===no,so=(e,t)=>(e!=null&&!kt(e),e),Ia=e=>he(e).$hostElement$,io=(e,t,n)=>{const r=L.ce(t,n);return e.dispatchEvent(r),r},sn=new WeakMap,oo=(e,t,n)=>{let r=je.get(e);$o&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,je.set(e,r)},ao=(e,t,n,r)=>{var s;let o=ir(t);const i=je.get(o);if(e=e.nodeType===11?e:q,i)if(typeof i=="string"){e=e.head||e;let a=sn.get(e),l;if(a||sn.set(e,a=new Set),!a.has(o)){{l=q.createElement("style"),l.innerHTML=i;const u=(s=L.$nonce$)!==null&&s!==void 0?s:sr(q);u!=null&&l.setAttribute("nonce",u),e.insertBefore(l,e.querySelector("link"))}a&&a.add(o)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,i]);return o},co=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,s=Y("attachStyles",t.$tagName$),o=ao(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);r&10&&(n["s-sc"]=o,n.classList.add(o+"-h")),s()},ir=(e,t)=>"sc-"+e.$tagName$,on=(e,t,n,r,s,o)=>{if(n!==r){let i=cn(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=an(n),d=an(r);l.remove(...u.filter(p=>p&&!d.includes(p))),l.add(...d.filter(p=>p&&!u.includes(p)))}else if(!i&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):cn(Ye,a)?t=a.slice(2):t=a[2]+t.slice(3),n&&L.rel(e,t,n,!1),r&&L.ael(e,t,r,!1);else{const l=kt(r);if((i||l&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{const u=r??"";t==="list"?i=!1:(n==null||e[t]!=u)&&(e[t]=u)}}catch{}r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!i||o&4||s)&&!l&&(r=r===!0?"":r,e.setAttribute(t,r))}}},lo=/\s/,an=e=>e?e.split(lo):[],or=(e,t,n,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||rn,i=t.$attrs$||rn;for(r in o)r in i||on(s,r,o[r],void 0,n,t.$flags$);for(r in i)on(s,r,o[r],i[r],n,t.$flags$)},It=(e,t,n,r)=>{const s=t.$children$[n];let o=0,i,a;if(s.$text$!==null)i=s.$elm$=q.createTextNode(s.$text$);else if(i=s.$elm$=q.createElement(s.$tag$),or(null,s,rr),eo(Re)&&i["s-si"]!==Re&&i.classList.add(i["s-si"]=Re),s.$children$)for(o=0;o<s.$children$.length;++o)a=It(e,s,o),a&&i.appendChild(a);return i},ar=(e,t,n,r,s,o)=>{let i=e,a;for(i.shadowRoot&&i.tagName===nr&&(i=i.shadowRoot);s<=o;++s)r[s]&&(a=It(null,n,s),a&&(r[s].$elm$=a,i.insertBefore(a,t)))},cr=(e,t,n,r,s)=>{for(;t<=n;++t)(r=e[t])&&(s=r.$elm$,s.remove())},uo=(e,t,n,r)=>{let s=0,o=0,i=t.length-1,a=t[0],l=t[i],u=r.length-1,d=r[0],p=r[u],w;for(;s<=i&&o<=u;)a==null?a=t[++s]:l==null?l=t[--i]:d==null?d=r[++o]:p==null?p=r[--u]:Oe(a,d)?(ve(a,d),a=t[++s],d=r[++o]):Oe(l,p)?(ve(l,p),l=t[--i],p=r[--u]):Oe(a,p)?(ve(a,p),e.insertBefore(a.$elm$,l.$elm$.nextSibling),a=t[++s],p=r[--u]):Oe(l,d)?(ve(l,d),e.insertBefore(l.$elm$,a.$elm$),l=t[--i],d=r[++o]):(w=It(t&&t[o],n,o),d=r[++o],w&&a.$elm$.parentNode.insertBefore(w,a.$elm$));s>i?ar(e,r[u+1]==null?null:r[u+1].$elm$,n,r,o,u):o>u&&cr(t,s,i)},Oe=(e,t)=>e.$tag$===t.$tag$,ve=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,o=t.$text$;o===null?(or(e,t,rr),r!==null&&s!==null?uo(n,r,t,s):s!==null?(e.$text$!==null&&(n.textContent=""),ar(n,null,t,s,0,s.length-1)):r!==null&&cr(r,0,r.length-1)):e.$text$!==o&&(n.data=o)},fo=(e,t)=>{const n=e.$hostElement$,r=e.$vnode$||gt(null,null),s=ro(t)?t:to(null,null,t);nr=n.tagName,s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=r.$elm$=n.shadowRoot||n,Re=n["s-sc"],ve(r,s)},lr=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(n=>e.$onRenderResolve$=n))},Pt=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return lr(e,e.$ancestorComponent$),ko(()=>po(e,t))},po=(e,t)=>{const n=Y("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$;let s;return n(),mo(s,()=>ho(e,r,t))},ho=async(e,t,n)=>{const r=e.$hostElement$,s=Y("update",e.$cmpMeta$.$tagName$),o=r["s-rc"];n&&co(e);const i=Y("render",e.$cmpMeta$.$tagName$);yo(e,t),o&&(o.map(a=>a()),r["s-rc"]=void 0),i(),s();{const a=r["s-p"],l=()=>go(e);a.length===0?l():(Promise.all(a).then(l),e.$flags$|=4,a.length=0)}},yo=(e,t,n)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,fo(e,t)}catch(r){_e(r,e.$hostElement$)}return null},go=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=Y("postUpdate",t),s=e.$ancestorComponent$;e.$flags$&64?r():(e.$flags$|=64,dr(n),r(),e.$onReadyResolve$(n),s||ur()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&Dt(()=>Pt(e,!1)),e.$flags$&=-517},ur=e=>{dr(q.documentElement),Dt(()=>io(Ye,"appload",{detail:{namespace:Xi}}))},mo=(e,t)=>e&&e.then?e.then(t):t(),dr=e=>e.classList.add("hydrated"),wo=(e,t)=>he(e).$instanceValues$.get(t),So=(e,t,n,r)=>{const s=he(e),o=s.$instanceValues$.get(t),i=s.$flags$,a=s.$lazyInstance$;n=so(n);const l=Number.isNaN(o)&&Number.isNaN(n),u=n!==o&&!l;(!(i&8)||o===void 0)&&u&&(s.$instanceValues$.set(t,n),a&&(i&18)===2&&Pt(s,!1))},fr=(e,t,n)=>{if(t.$members$){const r=Object.entries(t.$members$),s=e.prototype;r.map(([o,[i]])=>{(i&31||n&2&&i&32)&&Object.defineProperty(s,o,{get(){return wo(this,o)},set(a){So(this,o,a)},configurable:!0,enumerable:!0})})}return e},bo=async(e,t,n,r,s)=>{if(!(t.$flags$&32)){{if(t.$flags$|=32,s=Eo(n),s.then){const l=Qi();s=await s,l()}s.isProxied||(fr(s,n,2),s.isProxied=!0);const a=Y("createInstance",n.$tagName$);t.$flags$|=8;try{new s(t)}catch(l){_e(l)}t.$flags$&=-9,a()}if(s.style){let a=s.style;const l=ir(n);if(!je.has(l)){const u=Y("registerStyles",n.$tagName$);oo(l,a,!!(n.$flags$&1)),u()}}}const o=t.$ancestorComponent$,i=()=>Pt(t,!0);o&&o["s-rc"]?o["s-rc"].push(i):i()},vo=e=>{if(!(L.$flags$&1)){const t=he(e),n=t.$cmpMeta$,r=Y("connectedCallback",n.$tagName$);if(!(t.$flags$&1)){t.$flags$|=1;{let s=e;for(;s=s.parentNode||s.host;)if(s["s-p"]){lr(t,t.$ancestorComponent$=s);break}}n.$members$&&Object.entries(n.$members$).map(([s,[o]])=>{if(o&31&&e.hasOwnProperty(s)){const i=e[s];delete e[s],e[s]=i}}),bo(e,t,n)}r()}},Co=e=>{L.$flags$&1||he(e)},To=(e,t={})=>{var n;const r=Y(),s=[],o=t.exclude||[],i=Ye.customElements,a=q.head,l=a.querySelector("meta[charset]"),u=q.createElement("style"),d=[];let p,w=!0;Object.assign(L,t),L.$resourcesUrl$=new URL(t.resourcesUrl||"./",q.baseURI).href,e.map(b=>{b[1].map(g=>{const $={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};$.$members$=g[2];const F=$.$tagName$,ye=class extends HTMLElement{constructor(X){super(X),X=this,_o(X,$),$.$flags$&1&&X.attachShadow({mode:"open"})}connectedCallback(){p&&(clearTimeout(p),p=null),w?d.push(this):L.jmp(()=>vo(this))}disconnectedCallback(){L.jmp(()=>Co(this))}componentOnReady(){return he(this).$onReadyPromise$}};$.$lazyBundleId$=b[0],!o.includes(F)&&!i.get(F)&&(s.push(F),i.define(F,fr(ye,$,1)))})});{u.innerHTML=s+Zi,u.setAttribute("data-styles","");const b=(n=L.$nonce$)!==null&&n!==void 0?n:sr(q);b!=null&&u.setAttribute("nonce",b),a.insertBefore(u,l?l.nextSibling:a.firstChild)}w=!1,d.length?d.map(b=>b.connectedCallback()):L.jmp(()=>p=setTimeout(ur,30)),r()},Lt=new WeakMap,he=e=>Lt.get(e),Pa=(e,t)=>Lt.set(t.$lazyInstance$=e,t),_o=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onReadyPromise$=new Promise(r=>n.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[],Lt.set(e,n)},cn=(e,t)=>t in e,_e=(e,t)=>(0,console.error)(e,t),at=new Map,Eo=(e,t,n)=>{const r=e.$tagName$.replace(/-/g,"_"),s=e.$lazyBundleId$,o=at.get(s);if(o)return o[r];if(!n||!BUILD.hotModuleReplacement){const i=a=>(at.set(s,a),a[r]);switch(s){case"connect-modal":return Bt(()=>import("./connect-modal.entry-10258f3c.js"),["assets/connect-modal.entry-10258f3c.js","assets/index-028323f8.js","assets/index-f2d4ffa1.css"]).then(i,_e)}}return Bt(()=>import(`./${s}.entry.js`),[]).then(i=>(at.set(s,i),i[r]),_e)},je=new Map,Ye=typeof window<"u"?window:{},q=Ye.document||{head:{}},L={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},pr=e=>Promise.resolve(e),$o=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),ln=[],hr=[],Ao=(e,t)=>n=>{e.push(n),yt||(yt=!0,t&&L.$flags$&4?Dt(mt):L.raf(mt))},un=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){_e(n)}e.length=0},mt=()=>{un(ln),un(hr),(yt=ln.length>0)&&L.raf(mt)},Dt=e=>pr().then(e),ko=Ao(hr,!0),Io=()=>pr(),Po=(e,t)=>typeof window>"u"?Promise.resolve():Io().then(()=>To([["connect-modal",[[1,"connect-modal",{authOptions:[16],hasOpenedInstall:[32],hasOpenedInstallXverse:[32]}]]]],t));(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();var Lo=Object.defineProperty,Do=Object.defineProperties,Oo=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,dn=(e,t,n)=>t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V=(e,t)=>{for(var n in t||(t={}))yr.call(t,n)&&dn(e,n,t[n]);if(He)for(var n of He(t))gr.call(t,n)&&dn(e,n,t[n]);return e},ie=(e,t)=>Do(e,Oo(t)),xo=(e,t)=>{var n={};for(var r in e)yr.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&He)for(var r of He(e))t.indexOf(r)<0&&gr.call(e,r)&&(n[r]=e[r]);return n};function Ot(){return window.StacksProvider||window.BlockstackProvider}var mr="7.4.0";typeof window<"u"&&(window.__CONNECT_VERSION__=mr);var Uo=e=>{if(!e){let t=new Ve(["store_write"],document.location.href);e=new Te({appConfig:t})}return e},Ro=async(e,t=Ot())=>{if(!t)throw new Error("[Connect] No installed Stacks wallet found");let{redirectTo:n="/",manifestPath:r,onFinish:s,onCancel:o,sendToSignIn:i=!1,userSession:a,appDetails:l}=e,u=Uo(a);u.isUserSignedIn()&&u.signUserOut();let d=u.generateAndStoreTransitKey(),p=u.makeAuthRequest(d,`${document.location.origin}${n}`,`${document.location.origin}${r}`,u.appConfig.scopes,void 0,void 0,{sendToSignIn:i,appDetails:l,connectVersion:mr});try{let w=await t.authenticationRequest(p);await u.handlePendingSignIn(w);let b=P.decodeToken(w),g=b==null?void 0:b.payload;s==null||s({authResponse:w,authResponsePayload:g,userSession:u})}catch(w){console.error("[Connect] Error during auth request",w),o==null||o()}},Bo=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function wr(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n of e)t+=Bo[n];return t}function No(e){if(typeof e!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof e}`);let t=e.length%2?`0${e}`:e,n=new Uint8Array(t.length/2);for(let r=0;r<n.length;r++){let s=r*2,o=t.slice(s,s+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}var Fo=(e=>(e.ContractCall="contract_call",e.ContractDeploy="smart_contract",e.STXTransfer="token_transfer",e))(Fo||{}),Mo=(e=>(e.BUFFER="buffer",e.UINT="uint",e.INT="int",e.PRINCIPAL="principal",e.BOOL="bool",e))(Mo||{}),xt=e=>{let t=e;if(!t){let n=new Ve(["store_write"],document.location.href);t=new Te({appConfig:n})}return t};function Ko(e){try{return xt(e).loadUserData().appPrivateKey}catch{return!1}}var jo=e=>{let t=xt(e).loadUserData().appPrivateKey,n=P.SECP256K1Client.derivePublicKey(t);return{privateKey:t,publicKey:n}};function Ho(e){var t;let{stxAddress:n,userSession:r,network:s}=e;if(n)return n;if(!r||!s)return;let o=(t=r==null?void 0:r.loadUserData().profile)==null?void 0:t.stxAddress,i={[Nt.Mainnet]:"mainnet",[Nt.Testnet]:"testnet"};return o==null?void 0:o[i[s.chainId]]}function qo(e){let t=e.network||new En,n=xt(e.userSession),r=ie(V({},e),{network:t,userSession:n});return V({stxAddress:Ho(r)},r)}function Sr(e){return e.map(t=>wr(cs(t)))}async function Vo(e,t){let{postConditions:n}=e;return n&&typeof n[0]!="string"&&(n=Sr(n)),new P.TokenSigner("ES256k",t).signAsync(ie(V({},e),{postConditions:n}))}function zo(e){let{postConditions:t}=e;return t&&typeof t[0]!="string"&&(t=Sr(t)),P.createUnsecuredToken(ie(V({},e),{postConditions:t}))}var Jo=async({token:e,options:t},n)=>{var r,s,o;try{let i=await n.transactionRequest(e),{txRaw:a}=i,l=No(a.replace(/^0x/,"")),u=xs(l);if("sponsored"in t&&t.sponsored){(r=t.onFinish)==null||r.call(t,ie(V({},i),{stacksTransaction:u}));return}(s=t.onFinish)==null||s.call(t,ie(V({},i),{stacksTransaction:u}))}catch(i){console.error("[Connect] Error during transaction request",i),(o=t.onCancel)==null||o.call(t)}},Go=async e=>{let t=e,{functionArgs:n,appDetails:r,userSession:s}=t,o=xo(t,["functionArgs","appDetails","userSession"]),i=n.map(l=>typeof l=="string"?l:wr(as(l)));if(Ko(s)){let{privateKey:l,publicKey:u}=jo(s),d=ie(V({},o),{functionArgs:i,txType:"contract_call",publicKey:u});return r&&(d.appDetails=r),Vo(d,l)}let a=ie(V({},o),{functionArgs:i,txType:"contract_call"});return r&&(a.appDetails=r),zo(a)};async function Wo(e,t,n){let r=await t(V(V({},qo(e)),e));return Jo({token:r,options:e},n)}function Yo(e,t=Ot()){if(!t)throw new Error("[Connect] No installed Stacks wallet found");return Wo(e,Go,t)}var Xo=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY",e))(Xo||{}),Qo=(e,t=Ot())=>{if(t){Ro(e,t);return}if(typeof window!==void 0){Po();let n=document.createElement("connect-modal");n.authOptions=e,document.body.appendChild(n);let r=s=>{s.key==="Escape"&&(document.removeEventListener("keydown",r),n.remove())};document.addEventListener("keydown",r)}};const Zo=new Ve(["store_write","publish_data"]),Xe=new Te({appConfig:Zo});function br(){return{name:"XCall",icon:"https://i.postimg.cc/yxXS7sCJ/XCall.png"}}function fn(){Qo({appDetails:br(),redirectTo:"/",onFinish:()=>{window.location.reload()},userSession:Xe})}function ea(){return Xe.loadUserData()}function ta(e){typeof e=="function"?this.$confirm("Sign in first.","Tips",{confirmButtonText:"Sign in",cancelButtonText:"No",type:"info",center:!0}).then(()=>{fn()}).catch(()=>{e()}):fn()}function na(){Xe.signUserOut(),window.location.reload()}let vr=null,Cr=null;vr=new Et,Cr="https://api.mainnet.hiro.so";vr.coreApiUrl=Cr;function ra(){return ea().profile.stxAddress.mainnet}const H={alert(e,t){t||(t={}),ls.alert(e,t.title,{confirmButtonText:t.btnText?t.btnText:"Ok",dangerouslyUseHTMLString:!0})},tip(e,t){nt({message:e,type:t})},tipOk(e,t){nt({message:e,type:"success"})},tipErr(e){nt({message:e,type:"error"})},alertInvalidAddress(){this.alert("Address invalid")},buffer2Str(e){e.startsWith("0x")&&(e=e.substr(2));let t="";for(let n=0;n<e.length;n+=2){const r=e.substr(n,2),s=parseInt(r,16);t+=String.fromCharCode(s)}return t},trimLower(e){return e&&e.trim().toLowerCase()},parseAddress(e){if(!e||e.trim().length<=0)return null;try{const t=e.trim().split(".");return t.length==1?$n(t[0]):An(t[0],t[1])}catch{return null}},thousandNumStr(e){return e.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,")},sip10BalanceToStr(e){for(e.length<7?e="0."+"0".repeat(6-e.length)+e:e=e.substring(0,e.length-6)+"."+e.substring(e.length-6);e.endsWith("0")&&e.length>1;)e=e.substring(0,e.length-1);return e.endsWith(".")&&(e=e.substring(0,e.length-1)),e},blobToBase64(e,t){const n=new FileReader;n.onload=function(){const s=n.result.split(",")[1];t(s)},n.readAsDataURL(e)},base64ToBlob(e,t){const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const s=new Uint8Array(r);return new Blob([s],{type:t})}};var wt={exports:{}};(function(e,t){var n=typeof self<"u"?self:J,r=function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o}();(function(o){(function(i){var a={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function l(c){return c&&DataView.prototype.isPrototypeOf(c)}if(a.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(c){return c&&u.indexOf(Object.prototype.toString.call(c))>-1};function p(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function w(c){return typeof c!="string"&&(c=String(c)),c}function b(c){var f={next:function(){var m=c.shift();return{done:m===void 0,value:m}}};return a.iterable&&(f[Symbol.iterator]=function(){return f}),f}function g(c){this.map={},c instanceof g?c.forEach(function(f,m){this.append(m,f)},this):Array.isArray(c)?c.forEach(function(f){this.append(f[0],f[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(f){this.append(f,c[f])},this)}g.prototype.append=function(c,f){c=p(c),f=w(f);var m=this.map[c];this.map[c]=m?m+", "+f:f},g.prototype.delete=function(c){delete this.map[p(c)]},g.prototype.get=function(c){return c=p(c),this.has(c)?this.map[c]:null},g.prototype.has=function(c){return this.map.hasOwnProperty(p(c))},g.prototype.set=function(c,f){this.map[p(c)]=w(f)},g.prototype.forEach=function(c,f){for(var m in this.map)this.map.hasOwnProperty(m)&&c.call(f,this.map[m],m,this)},g.prototype.keys=function(){var c=[];return this.forEach(function(f,m){c.push(m)}),b(c)},g.prototype.values=function(){var c=[];return this.forEach(function(f){c.push(f)}),b(c)},g.prototype.entries=function(){var c=[];return this.forEach(function(f,m){c.push([m,f])}),b(c)},a.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function $(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function F(c){return new Promise(function(f,m){c.onload=function(){f(c.result)},c.onerror=function(){m(c.error)}})}function ye(c){var f=new FileReader,m=F(f);return f.readAsArrayBuffer(c),m}function X(c){var f=new FileReader,m=F(f);return f.readAsText(c),m}function ge(c){for(var f=new Uint8Array(c),m=new Array(f.length),k=0;k<f.length;k++)m[k]=String.fromCharCode(f[k]);return m.join("")}function h(c){if(c.slice)return c.slice(0);var f=new Uint8Array(c.byteLength);return f.set(new Uint8Array(c)),f.buffer}function me(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:a.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:a.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():a.arrayBuffer&&a.blob&&l(c)?(this._bodyArrayBuffer=h(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||d(c))?this._bodyArrayBuffer=h(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var c=$(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?$(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ye)}),this.text=function(){var c=$(this);if(c)return c;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ge(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(Er)}),this.json=function(){return this.text().then(JSON.parse)},this}var Tr=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _r(c){var f=c.toUpperCase();return Tr.indexOf(f)>-1?f:c}function te(c,f){f=f||{};var m=f.body;if(c instanceof te){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,f.headers||(this.headers=new g(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!m&&c._bodyInit!=null&&(m=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new g(f.headers)),this.method=_r(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&m)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(m)}te.prototype.clone=function(){return new te(this,{body:this._bodyInit})};function Er(c){var f=new FormData;return c.trim().split("&").forEach(function(m){if(m){var k=m.split("="),A=k.shift().replace(/\+/g," "),v=k.join("=").replace(/\+/g," ");f.append(decodeURIComponent(A),decodeURIComponent(v))}}),f}function $r(c){var f=new g,m=c.replace(/\r?\n[\t ]+/g," ");return m.split(/\r?\n/).forEach(function(k){var A=k.split(":"),v=A.shift().trim();if(v){var $e=A.join(":").trim();f.append(v,$e)}}),f}me.call(te.prototype);function j(c,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new g(f.headers),this.url=f.url||"",this._initBody(c)}me.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var c=new j(null,{status:0,statusText:""});return c.type="error",c};var Ar=[301,302,303,307,308];j.redirect=function(c,f){if(Ar.indexOf(f)===-1)throw new RangeError("Invalid status code");return new j(null,{status:f,headers:{location:c}})},i.DOMException=o.DOMException;try{new i.DOMException}catch{i.DOMException=function(f,m){this.message=f,this.name=m;var k=Error(f);this.stack=k.stack},i.DOMException.prototype=Object.create(Error.prototype),i.DOMException.prototype.constructor=i.DOMException}function Qe(c,f){return new Promise(function(m,k){var A=new te(c,f);if(A.signal&&A.signal.aborted)return k(new i.DOMException("Aborted","AbortError"));var v=new XMLHttpRequest;function $e(){v.abort()}v.onload=function(){var we={status:v.status,statusText:v.statusText,headers:$r(v.getAllResponseHeaders()||"")};we.url="responseURL"in v?v.responseURL:we.headers.get("X-Request-URL");var Ze="response"in v?v.response:v.responseText;m(new j(Ze,we))},v.onerror=function(){k(new TypeError("Network request failed"))},v.ontimeout=function(){k(new TypeError("Network request failed"))},v.onabort=function(){k(new i.DOMException("Aborted","AbortError"))},v.open(A.method,A.url,!0),A.credentials==="include"?v.withCredentials=!0:A.credentials==="omit"&&(v.withCredentials=!1),"responseType"in v&&a.blob&&(v.responseType="blob"),A.headers.forEach(function(we,Ze){v.setRequestHeader(Ze,we)}),A.signal&&(A.signal.addEventListener("abort",$e),v.onreadystatechange=function(){v.readyState===4&&A.signal.removeEventListener("abort",$e)}),v.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return Qe.polyfill=!0,o.fetch||(o.fetch=Qe,o.Headers=g,o.Request=te,o.Response=j),i.Headers=g,i.Request=te,i.Response=j,i.fetch=Qe,Object.defineProperty(i,"__esModule",{value:!0}),i})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t})(wt,wt.exports);var sa=wt.exports;const ct=wn(sa);const ia={name:"MainPage",components:{},data(){return{netType:"",curNetwork:null,coreApiUrl:"",curContractAddr:"",state:0,curContractPair:[],constList:[],varList:[],varDatas:{activeIndexList:[],loading:null,fetchAllIndexList:[],fetchAllFinishCount:0,fetchAllNextIndex:0},mapList:[],mapDatas:{activeIndexList:[],queryResult:{}},readFuncList:[],readFuncDatas:{activeIndexList:[],queryResult:{}},writeFuncList:[],writeFuncDatas:{activeIndexList:[]},curTab:"",directConvertCVTypes:{[y.Int]:!0,[y.UInt]:!0,[y.Buffer]:!0,[y.BoolTrue]:!0,[y.BoolFalse]:!0,[y.PrincipalStandard]:!0,[y.PrincipalContract]:!0,[y.StringASCII]:!0,[y.StringUTF8]:!0}}},async mounted(){const e=localStorage.getItem("netType");this.netType=e||"mainnet",this.updateNetwork();const t=localStorage.getItem("contract");this.curContractAddr=t||""},computed:{bNeedSignIn(){return!Xe.isUserSignedIn()},curLoginAddress(){return this.bNeedSignIn?"":ra()},targetContractUrl(){if(this.netType=="mainnet")return`https://explorer.hiro.so/txid/${this.curContractAddr}?chain=mainnet`;if(this.netType=="testnet")return`https://explorer.hiro.so/txid/${this.curContractAddr}?chain=testnet`}},methods:{onClickLoginIn(){ta()},onClickLoginOut(){na()},resetBeforeLoad(){this.state=0,this.curContractPair.splice(0,this.curContractPair.length),this.constList.splice(0,this.constList.length),this.varList.splice(0,this.varList.length),this.varDatas.activeIndexList.splice(0,this.varDatas.activeIndexList.length),this.mapList.splice(0,this.mapList.length),this.mapDatas.activeIndexList.splice(0,this.mapDatas.activeIndexList.length),this.readFuncList.splice(0,this.readFuncList.length),this.readFuncDatas.activeIndexList.splice(0,this.readFuncDatas.activeIndexList.length),this.writeFuncList.splice(0,this.writeFuncList.length),this.writeFuncDatas.activeIndexList.splice(0,this.writeFuncDatas.activeIndexList.length)},onChangeNetwork(){this.updateNetwork(),localStorage.setItem("netType",this.netType)},updateNetwork(){this.curNetwork=null;const e=localStorage.getItem(this.netType);this.netType=="mainnet"?(this.coreApiUrl=e||"https://api.hiro.so",this.curNetwork=new Et):this.netType=="testnet"&&(this.coreApiUrl=e||"https://api.testnet.hiro.so",this.curNetwork=new En),this.curNetwork.coreApiUrl=this.coreApiUrl},onChangeCoreApi(){this.curNetwork.coreApiUrl=this.coreApiUrl,localStorage.setItem(this.netType,this.coreApiUrl)},async onClickLoadContract(){if(this.resetBeforeLoad(),this.state=1,!this.trContract(this.curContractAddr)){H.tipErr("Invalid contract address");return}localStorage.setItem("contract",this.curContractAddr);let e=this.createLoading("Loading"),[t,n]=this.curContractAddr.split(".");this.curContractPair.push(t,n);try{const r=await ct(`${this.coreApiUrl}/v2/contracts/interface/${t}/${n}`);e.close(),r.status==200?(this.state=2,this.queryContractABIFinish(await r.json())):H.tipErr(`Request fail, status=${r.status}`)}catch(r){e.close(),H.tipErr("Request fail, check console log"),console.error("error: request contract interface error:",r)}},queryContractABIFinish(e){for(let t of e.variables){const n=Object.assign({},t);n.unifyType=this.parseUnifyType(t.type),n.serverState=0,n.serverValue="",n.access=="constant"?this.constList.push(n):n.access=="variable"&&this.varList.push(n)}for(let t of e.maps){const n=Object.assign({},t);n.unifyKeyType=this.parseUnifyType(n.key),n.keyAstType=this.parseTypeAst(n.key),n.unifyValueType=this.parseUnifyType(n.value),this.mapList.push(n)}for(let t of e.functions){const n=Object.assign({},t);let r=[],s=[];for(let o of n.args)o.unifyType=this.parseUnifyType(o.type),r.push(`(${o.name} ${o.unifyType})`),s.push({name:o.name,astType:this.parseTypeAst(o.type)});n.argAstList=s,n.paramsDesc=r.length>0?`${r.join(" ")}`:"none",n.resultType=this.parseUnifyType(n.outputs.type),n.access=="public"?this.writeFuncList.push(n):n.access=="read_only"&&this.readFuncList.push(n)}this.readFuncList.length>0?this.curTab="read":this.varList.length>0?this.curTab="variables":this.mapList.length>0?this.curTab="maps":this.writeFuncList.length>0?this.curTab="write":this.curTab="source"},resetFetchAllVarInfo(){this.varDatas.activeIndexList.splice(0,this.varDatas.activeIndexList.length),this.varDatas.loading&&(this.varDatas.loading.close(),this.varDatas.loading=null);let e=this.varDatas.fetchAllIndexList;e.splice(0,e.length),this.varDatas.fetchAllFinishCount=0,this.varDatas.fetchAllNextIndex=0},async onClickLoadAllVar(){this.resetFetchAllVarInfo();let e=this.varDatas.fetchAllIndexList;for(let n=0;n<this.varList.length;n++){const r=this.varList[n];r.serverState=0,r.serverValue="",e.push(n)}this.updateVarLoadingTip(!1,!0);const t=Math.min(8,e.length);this.varDatas.fetchAllNextIndex=t;for(let n=0;n<t;n++)this.fetchVar(e[n],!0)},updateVarLoadingTip(e,t){this.varDatas.loading||(this.varDatas.loading=this.createLoading("","rgba(0,0,0,0.7)"));let n="";if(t){const r=this.varList.length-this.varDatas.fetchAllIndexList.length;n=`Loading ${Math.min(r+this.varDatas.fetchAllFinishCount+1,this.varList.length)}/${this.varList.length}`}else n="Loading";e&&(this.varDatas.loading.text=n+"(Blocked by server, wait 1 minute)"),this.varDatas.loading.text=n},async handleChangeVarCollapse(){for(let e of this.varDatas.activeIndexList){const t=this.varList[e];t.serverState&&t.serverState>0||await this.fetchVar(e,!1)}},async fetchVar(e,t){for(;;){let n=this.varList[e];try{n.serverState=1;const r=await ct(`${this.coreApiUrl}/v2/data_var/${this.curContractPair[0]}/${this.curContractPair[1]}/${n.name}`);if(r.status==200){n.serverState=2;const s=await r.json();n.serverValue=this.parseCVValue(Ft(s.data),n.unifyType)}else n.serverState=0,H.tipErr(`error: fetchVar ${n.name} error, status=${r.status}`)}catch(r){n.serverState=0,H.tipErr("Request fail, check console log"),console.error(`error: fetchVar ${n.name} error:`,r)}if(n.serverState==2){t&&(this.varDatas.fetchAllFinishCount++,this.updateVarLoadingTip(!1,t),this.varDatas.activeIndexList.indexOf(e)==-1&&this.varDatas.activeIndexList.push(e),this.varDatas.fetchAllNextIndex<this.varDatas.fetchAllIndexList.length?this.fetchVar(this.varDatas.fetchAllIndexList[this.varDatas.fetchAllNextIndex++],t):this.varDatas.fetchAllFinishCount==this.varDatas.fetchAllIndexList.length&&(this.varDatas.loading.close(),H.tipOk("Load finish")));break}else this.updateVarLoadingTip(!0,t),await new Promise(r=>setTimeout(r,5e3))}},parseCVValue(e,t){try{if(this.directConvertCVTypes[e.type]){const n=xe(e).toString();return e.type==y.StringASCII||e.type==y.StringUTF8?`"${n}"`:e.type==y.UInt?`u${n}`:e.type==y.PrincipalStandard||e.type==y.PrincipalContract?`'${n}`:n}if(e.type==y.OptionalNone)return"none";if(e.type==y.OptionalSome)return`(some ${this.parseCVValue(e.value)})`;if(e.type==y.ResponseOk)return`(ok ${this.parseCVValue(e.value)})`;if(e.type==y.ResponseErr)return`(err ${this.parseCVValue(e.value)})`;if(e.type==y.List){let n=[];for(const r of e.list)n.push(this.parseCVValue(r));return`(list ${n.join(" ")})`}if(e.type==y.Tuple){let n=[];for(const[r,s]of Object.entries(e.data))if(typeof s=="object"&&s.type!=null){const o=this.parseCVValue(s);n.push(`${r}: ${o}`)}return`{ ${n.join(", ")} }`}return`error: unknown clarity type ${e.type}`}catch(n){return console.log("parse value err: ",n),"parse error"}},async onClickQueryMap(e){this.mapDatas.queryResult[e]="	";const t=this.mapList[e];let n=this.$refs["map"+e][0];const[r,s]=n.getCvValue();if(s){this.mapDatas.queryResult[e]="",this.$alert(s,"error",{confirmButtonText:"Ok"});return}const o=ds(r);try{const i=await ct(`${this.coreApiUrl}/v2/map_entry/${this.curContractPair[0]}/${this.curContractPair[1]}/${t.name}`,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});if(i.status==200){const a=await i.json(),l=this.parseCVValue(Ft(a.data),t.unifyValueType);this.mapDatas.queryResult[e]=l}else this.mapDatas.queryResult[e]="",H.tipErr(`error: fetch map entry ${t.name} error, status=${i.status}`)}catch(i){this.mapDatas.queryResult[e]="",H.tipErr("Request fail, check console log"),console.error(`error: fetch map entry ${t.name} error:`,i)}},async onClickCallReadonly(e){this.readFuncDatas.queryResult[e]="	";const t=this.readFuncList[e];let n=this.$refs["readfunc"+e][0];const[r,s]=n.getArgList();if(s){this.readFuncDatas.queryResult[e]="",this.$alert(s,"error",{confirmButtonText:"Ok"});return}try{const o={contractAddress:this.curContractPair[0],contractName:this.curContractPair[1],functionName:t.name,functionArgs:r,network:this.curNetwork,senderAddress:this.curContractPair[0]},i=await fs(o),a=this.parseCVValue(i,t.resultType);this.readFuncDatas.queryResult[e]=a}catch(o){this.readFuncDatas.queryResult[e]="",H.tipErr("Request fail, check console log"),console.error(`error: call read-only function ${t.name} fail, error:`,o)}},onClickCallPublic(e){const t=this.writeFuncList[e];let n=this.$refs["writefunc"+e][0];const[r,s]=n.getArgList();if(s){this.$alert(s,"Param error",{confirmButtonText:"Ok"});return}let o=this.$refs["postCond"+e][0];const[i,a,l]=o.getPostCondList();if(i){this.$alert(i,"Post condition error",{confirmButtonText:"Ok"});return}const u={contractAddress:this.curContractPair[0],contractName:this.curContractPair[1],functionName:t.name,functionArgs:r,network:this.curNetwork,appDetails:br(),postConditions:l,postConditionMode:parseInt(a),onFinish:d=>{H.alert("Transaction has been sent",{title:t.name})}};Yo(u)},parseUnifyType(e){if(e=="int128")return"int";if(e=="uint128")return"uint";if(typeof e=="object"){if(e.optional)return`(optional ${this.parseUnifyType(e.optional)})`;if(e.list){const t=this.parseUnifyType(e.list.type);return`(list ${e.list.length} ${t})`}if(e.buffer)return`(buff ${e.buffer.length})`;if(e["string-ascii"])return`(string-ascii ${e["string-ascii"].length})`;if(e["string-utf8"])return`(string-utf8 ${e["string-utf8"].length})`;if(e.tuple){let t=[];for(const n of e.tuple){const r=this.parseUnifyType(n.type);t.push(`${n.name}: ${r}`)}return`{${t.join(", ")}}`}if(e.response){const t=this.parseUnifyType(e.response.ok),n=this.parseUnifyType(e.response.error);return`(response ${t} ${n})`}}return e=="trait_reference"?"<trait>":e},parseTypeAst(e){if(e=="int128")return"int";if(e=="uint128")return"uint";if(typeof e=="object"){if(e.optional)return{combType:"optional",astType:this.parseTypeAst(e.optional)};if(e.list)return{combType:"list",astType:this.parseTypeAst(e.list.type),maxCount:e.list.length};if(e.buffer)return`(buff ${e.buffer.length})`;if(e["string-ascii"])return`(string-ascii ${e["string-ascii"].length})`;if(e["string-utf8"])return`(string-utf8 ${e["string-utf8"].length})`;if(e.tuple){let t=[];for(const n of e.tuple)t.push({name:n.name,astType:this.parseTypeAst(n.type)});return{combType:"tuple",fields:t}}}return e},async onClickCollapseAll(e){e.splice(0,e.length)},createLoading(e,t){return this.$loading({lock:!0,text:e,spinner:"el-icon-loading",background:t||"rgba(0, 0, 0, 0.05)"})},trEOA(e){let t=null;if(e)try{t=$n(realTargetAddr)}catch{t=null}return t},trContract(e){let t=null;if(e&&e.indexOf(".")!=-1)try{let[n,r]=e.split(".");t=An(n,r)}catch{t=null}return t},trPrinciple(e){let t=this.trEOA(e);return t||(t=this.trContract(e)),t}}},Ut=e=>(ys("data-v-129fa932"),e=e(),gs(),e),oa={id:"main"},aa={key:0,style:{"margin-right":"8px"}},ca=Ut(()=>O("hr",null,null,-1)),la=Ut(()=>O("span",null,"Network:",-1)),ua=Ut(()=>O("span",null,"Contract:",-1)),da={style:{"margin-bottom":"8px"}},fa={class:"boldTitle"},pa={class:"queryResult"},ha={key:0},ya={key:0,class:"typeTip"},ga={style:{"margin-bottom":"8px"}},ma={class:"boldTitle"},wa={class:"typeTip"},Sa={class:"typeTip"},ba={key:0,class:"queryResult"},va={style:{"margin-bottom":"8px"}},Ca={class:"boldTitle"},Ta={key:0,class:"queryResult"},_a={style:{"margin-top":"8px","margin-bottom":"8px"}},Ea={class:"boldTitle"};function $a(e,t,n,r,s,o){const i=x("el-button"),a=x("el-option"),l=x("el-select"),u=x("el-input"),d=x("el-space"),p=x("el-collapse-item"),w=x("el-collapse"),b=x("el-tab-pane"),g=x("ASTItem"),$=x("ArgsItem"),F=x("el-alert"),ye=x("PostCondItem"),X=x("el-tabs"),ge=ps("loading");return T(),M("div",oa,[O("div",null,[o.bNeedSignIn?U("",!0):(T(),M("span",aa,"Address: "+K(o.curLoginAddress),1)),o.bNeedSignIn?(T(),N(i,{key:1,type:"primary",onClick:o.onClickLoginIn},{default:S(()=>[I("Sign in")]),_:1},8,["onClick"])):U("",!0),o.bNeedSignIn?U("",!0):(T(),N(i,{key:2,type:"info",onClick:o.onClickLoginOut},{default:S(()=>[I("Sign out")]),_:1},8,["onClick"]))]),ca,C(d,{direction:"vertical",alignment:"start",size:"large"},{default:S(()=>[C(d,null,{default:S(()=>[la,C(l,{size:"large",style:{width:"120px"},modelValue:s.netType,"onUpdate:modelValue":t[0]||(t[0]=h=>s.netType=h),placeholder:"Please select",onChange:o.onChangeNetwork},{default:S(()=>[C(a,{value:"mainnet",label:"Mainnet"}),C(a,{value:"testnet",label:"Testnet"})]),_:1},8,["modelValue","onChange"]),C(u,{size:"large",style:{width:"500px"},clearable:"",placeholder:"coreApiUrl",modelValue:s.coreApiUrl,"onUpdate:modelValue":t[1]||(t[1]=h=>s.coreApiUrl=h),onChange:o.onChangeCoreApi},null,8,["modelValue","onChange"])]),_:1}),C(d,null,{default:S(()=>[ua,C(u,{size:"large",style:{width:"625px"},clearable:"",placeholder:"Contract address",modelValue:s.curContractAddr,"onUpdate:modelValue":t[2]||(t[2]=h=>s.curContractAddr=h)},null,8,["modelValue"]),C(i,{size:"large",type:"primary",disabled:s.curContractAddr.trim().length==0,onClick:o.onClickLoadContract},{default:S(()=>[I("Load")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),C(X,{modelValue:s.curTab,"onUpdate:modelValue":t[11]||(t[11]=h=>s.curTab=h),style:hs({visibility:s.state==2?"visible":"hidden"}),class:"tabArea"},{default:S(()=>[s.varList.length>0?(T(),N(b,{key:0,label:"Variables",name:"variables"},{default:S(()=>[O("div",da,[C(i,{type:"primary",plain:"",style:{display:"inline-block"},onClick:o.onClickLoadAllVar},{default:S(()=>[I("Load all")]),_:1},8,["onClick"]),C(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[3]||(t[3]=h=>o.onClickCollapseAll(s.varDatas.activeIndexList))},{default:S(()=>[I("Collapse all")]),_:1})]),C(w,{modelValue:s.varDatas.activeIndexList,"onUpdate:modelValue":t[4]||(t[4]=h=>s.varDatas.activeIndexList=h),onChange:o.handleChangeVarCollapse,class:"tabCollapse"},{default:S(()=>[(T(!0),M(ke,null,Ie(s.varList.length,h=>(T(),N(p,{key:h-1,name:h-1},{title:S(()=>[O("span",fa,K(s.varList[h-1].name),1)]),default:S(()=>[rt((T(),M("div",pa,[s.varList[h-1].serverState==2?(T(),M("div",ha,[I(K(s.varList[h-1].serverValue)+" ",1),s.varList[h-1].serverState==2?(T(),M("span",ya,""+K(s.varList[h-1].unifyType),1)):U("",!0)])):U("",!0)])),[[ge,s.varList[h-1].serverState==1]])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})):U("",!0),s.mapList.length>0?(T(),N(b,{key:1,label:"Maps",name:"maps"},{default:S(()=>[O("div",ga,[C(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[5]||(t[5]=h=>o.onClickCollapseAll(s.mapDatas.activeIndexList))},{default:S(()=>[I("Collapse all")]),_:1})]),C(w,{modelValue:s.mapDatas.activeIndexList,"onUpdate:modelValue":t[6]||(t[6]=h=>s.mapDatas.activeIndexList=h),style:{"max-width":"660px"}},{default:S(()=>[(T(!0),M(ke,null,Ie(s.mapList.length,h=>(T(),N(p,{key:h-1,name:h-1},{title:S(()=>[O("span",ma,K(s.mapList[h-1].name),1)]),default:S(()=>[O("span",wa,K(s.mapList[h-1].unifyKeyType),1),I(" => "),O("span",Sa,K(s.mapList[h-1].unifyValueType),1),C(g,{ref_for:!0,ref:"map"+(h-1),varAstType:s.mapList[h-1].keyAstType},null,8,["varAstType"]),C(i,{class:"queryBtn",type:"primary",plain:"",onClick:me=>o.onClickQueryMap(h-1)},{default:S(()=>[I("Query")]),_:2},1032,["onClick"]),s.mapDatas.queryResult[h-1]!=null?rt((T(),M("div",ba,[I(K(s.mapDatas.queryResult[h-1]),1)])),[[ge,s.mapDatas.queryResult[h-1]=="	"]]):U("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})):U("",!0),s.readFuncList.length>0?(T(),N(b,{key:2,label:"Read",name:"read"},{default:S(()=>[O("div",va,[C(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[7]||(t[7]=h=>o.onClickCollapseAll(s.readFuncDatas.activeIndexList))},{default:S(()=>[I("Collapse all")]),_:1})]),s.readFuncList.length>0?(T(),N(w,{key:0,modelValue:s.readFuncDatas.activeIndexList,"onUpdate:modelValue":t[8]||(t[8]=h=>s.readFuncDatas.activeIndexList=h),class:"tabCollapse"},{default:S(()=>[(T(!0),M(ke,null,Ie(s.readFuncList.length,h=>(T(),N(p,{key:h-1,name:h-1},{title:S(()=>[O("span",Ca,K(s.readFuncList[h-1].name),1)]),default:S(()=>[C($,{ref_for:!0,ref:"readfunc"+(h-1),argList:s.readFuncList[h-1].argAstList},null,8,["argList"]),C(i,{type:"primary",class:"queryBtn",plain:"",onClick:me=>o.onClickCallReadonly(h-1)},{default:S(()=>[I("Query")]),_:2},1032,["onClick"]),s.readFuncDatas.queryResult[h-1]!=null?rt((T(),M("div",Ta,[I(K(s.readFuncDatas.queryResult[h-1]),1)])),[[ge,s.readFuncDatas.queryResult[h-1]=="	"]]):U("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):U("",!0)]),_:1})):U("",!0),s.writeFuncList.length>0?(T(),N(b,{key:3,label:"Write",name:"write"},{default:S(()=>[C(F,{effect:"dark",title:"The sign-in account should match the account in wallet app.",type:"info",style:{width:"660px"}}),O("div",_a,[o.bNeedSignIn?(T(),N(i,{key:0,type:"primary",onClick:o.onClickLoginIn},{default:S(()=>[I("Sign in")]),_:1},8,["onClick"])):U("",!0),C(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[9]||(t[9]=h=>o.onClickCollapseAll(s.writeFuncDatas.activeIndexList))},{default:S(()=>[I("Collapse all")]),_:1})]),C(w,{modelValue:s.writeFuncDatas.activeIndexList,"onUpdate:modelValue":t[10]||(t[10]=h=>s.writeFuncDatas.activeIndexList=h),class:"tabCollapse"},{default:S(()=>[(T(!0),M(ke,null,Ie(s.writeFuncList.length,h=>(T(),N(p,{key:h-1,name:h-1},{title:S(()=>[O("span",Ea,K(s.writeFuncList[h-1].name),1)]),default:S(()=>[C($,{ref_for:!0,ref:"writefunc"+(h-1),argList:s.writeFuncList[h-1].argAstList},null,8,["argList"]),C(ye,{ref_for:!0,ref:"postCond"+(h-1)},null,512),C(i,{disabled:o.bNeedSignIn,type:"primary",plain:"",onClick:me=>o.onClickCallPublic(h-1)},{default:S(()=>[I("Call")]),_:2},1032,["disabled","onClick"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})):U("",!0)]),_:1},8,["modelValue","style"])])}const Aa=us(ia,[["render",$a],["__scopeId","data-v-129fa932"]]),La=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"}));export{La as M,Ia as g,to as h,Pa as r};
