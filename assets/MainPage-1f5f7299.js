import{C as y,p as kr,b as E,u as vt,a as Ir,A as T,D as Fe,c as ee,s as Pr,g as Dr,S as Me,i as W,d as ze,e as Ct,f as dt,h as Ee,P as B,j as ft,k as Lr,l as yn,m as re,V as ne,n as ae,o as N,t as _t,q as Or,r as xr,R as gn,v as Ur,w as mn,x as wn,y as Rr,z as Br,B as nt,T as Nr,E as pt,F as Sn,G as Fr,H as Mr,I as Kr,J,K as Nt,L as Se,M as jr,N as Hr,O as Tt,Q as ce,U as qr,W as bn,X as Vr,Y as le,Z as zr,_ as ue,$ as Et,a0 as vn,a1 as Cn,a2 as _n,a3 as Jr,a4 as Gr,a5 as Tn,a6 as Wr,a7 as Yr,a8 as En,a9 as $t,aa as Xr,ab as Qr,ac as $n,ad as Zr,ae as es,af as G,ag as ts,ah as ns,ai as rs,aj as ss,ak as Ie,al as At,am as rt,an as is,ao as os,ap as Ft,aq as An,ar as as,as as Mt,at as cs,au as ls,av as st,aw as kn,ax as In,ay as us,az as Kt,aA as ds,aB as fs,aC as D,aD as ps,aE as _,aF as K,aG as I,aH as U,aI as R,aJ as F,aK as m,aL as v,aM as hs,aN as k,aO as Pe,aP as De,aQ as ys,aR as gs,aS as it}from"./index-de2e9755.js";const oe={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(oe);class pe extends Error{constructor(t){super();let n=t.message,r=`Error Code: ${t.code}`,s=this.stack;if(s)r+=`Stack Trace:
${s}`;else try{throw new Error}catch(o){s=o.stack}n+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${r}`,this.message=n,this.code=t.code,this.parameter=t.parameter?t.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class ms extends pe{constructor(t,n=""){super({code:oe.MISSING_PARAMETER,message:n,parameter:t}),this.name="MissingParametersError"}}class jt extends pe{constructor(t=""){super({code:oe.INVALID_DID_ERROR,message:t}),this.name="InvalidDIDError"}}class Le extends pe{constructor(t){const n=`Failed to login: ${t}`;super({code:oe.LOGIN_FAILED_ERROR,message:n}),this.message=n,this.name="LoginFailedError"}}class Ht extends pe{constructor(t="Unable to decrypt cipher object."){super({code:oe.FAILED_DECRYPTION_ERROR,message:t}),this.message=t,this.name="FailedDecryptionError"}}class ht extends pe{constructor(t){super({code:oe.INVALID_STATE,message:t}),this.message=t,this.name="InvalidStateError"}}class Pn extends pe{constructor(t){super({code:oe.INVALID_STATE,message:t}),this.message=t,this.name="NoSessionDataError"}}function Re(e,t=!1){switch(e.type){case y.BoolTrue:return!0;case y.BoolFalse:return!1;case y.Int:case y.UInt:return t?e.value.toString():e.value;case y.Buffer:return`0x${E(e.buffer)}`;case y.OptionalNone:return null;case y.OptionalSome:return be(e.value);case y.ResponseErr:return be(e.value);case y.ResponseOk:return be(e.value);case y.PrincipalStandard:case y.PrincipalContract:return kr(e);case y.List:return e.list.map(r=>be(r));case y.Tuple:const n={};return Object.keys(e.data).forEach(r=>{n[r]=be(e.data[r])}),n;case y.StringASCII:return e.data;case y.StringUTF8:return e.data}}function be(e){switch(e.type){case y.ResponseErr:return{type:Z(e),value:Re(e,!0),success:!1};case y.ResponseOk:return{type:Z(e),value:Re(e,!0),success:!0};default:return{type:Z(e),value:Re(e,!0)}}}function Z(e){switch(e.type){case y.BoolTrue:case y.BoolFalse:return"bool";case y.Int:return"int";case y.UInt:return"uint";case y.Buffer:return`(buff ${e.buffer.length})`;case y.OptionalNone:return"(optional none)";case y.OptionalSome:return`(optional ${Z(e.value)})`;case y.ResponseErr:return`(response UnknownType ${Z(e.value)})`;case y.ResponseOk:return`(response ${Z(e.value)} UnknownType)`;case y.PrincipalStandard:case y.PrincipalContract:return"principal";case y.List:return`(list ${e.list.length} ${e.list.length?Z(e.list[0]):"UnknownType"})`;case y.Tuple:return`(tuple ${Object.keys(e.data).map(t=>`(${t} ${Z(e.data[t])})`).join(" ")})`;case y.StringASCII:return`(string-ascii ${Ir(e.data).length})`;case y.StringUTF8:return`(string-utf8 ${vt(e.data).length})`}}function kt(){return{type:re.MessageSignature,data:E(new Uint8Array(gn))}}function Dn(e,t,n,r){const s=Ct(0,e,1,[dt(t)]).hash160,o=Ee(dt(t))?B.Compressed:B.Uncompressed;return{hashMode:e,signer:s,nonce:W(n,!1),fee:W(r,!1),keyEncoding:o,signature:kt()}}function Ce(e){return"signature"in e}function qt(e){const t=ft(e);return t.nonce=0,t.fee=0,Ce(t)?t.signature=kt():t.fields=[],{...t,nonce:BigInt(0),fee:BigInt(0)}}function ws(e){const t=[e.hashMode,N(e.signer),ae(e.nonce,!1,8),ae(e.fee,!1,8),e.keyEncoding,Ur(e.signature)];return ze(t)}function Ss(e){const t=[e.hashMode,N(e.signer),ae(e.nonce,!1,8),ae(e.fee,!1,8)],n=mn(e.fields);t.push(wn(n));const r=new Uint8Array(2);return Rr(r,e.signaturesRequired,0),t.push(r),ze(t)}function bs(e,t){const n=E(t.readBytes(20)),r=BigInt(`0x${E(t.readBytes(8))}`),s=BigInt(`0x${E(t.readBytes(8))}`),o=t.readUInt8Enum(B,a=>{throw new Fe(`Could not parse ${a} as PubKeyEncoding`)});if(e===ee.SerializeP2WPKH&&o!=B.Compressed)throw new Fe("Failed to parse singlesig spending condition: incomaptible hash mode and key encoding");const i=Lr(t);return{hashMode:e,signer:n,nonce:r,fee:s,keyEncoding:o,signature:i}}function vs(e,t){const n=E(t.readBytes(20)),r=BigInt("0x"+E(t.readBytes(8))),s=BigInt("0x"+E(t.readBytes(8))),o=yn(t,re.TransactionAuthField).values;let i=!1,a=0;for(const u of o)switch(u.contents.type){case re.PublicKey:Ee(u.contents)||(i=!0);break;case re.MessageSignature:if(u.pubKeyEncoding===B.Uncompressed&&(i=!0),a+=1,a===65536)throw new ne("Failed to parse multisig spending condition: too many signatures");break}const l=t.readUInt16BE();if(i&&e===ee.SerializeP2SH)throw new ne("Uncompressed keys are not allowed in this hash mode");return{hashMode:e,signer:n,nonce:r,fee:s,fields:o,signaturesRequired:l}}function ot(e){return Ce(e)?ws(e):Ss(e)}function at(e){const t=e.readUInt8Enum(ee,n=>{throw new Fe(`Could not parse ${n} as AddressHashMode`)});return t===ee.SerializeP2PKH||t===ee.SerializeP2WPKH?bs(t,e):vs(t,e)}function Ln(e,t,n,r){const o=e+E(new Uint8Array([t]))+E(ae(n,!1,8))+E(ae(r,!1,8));if(N(o).byteLength!==49)throw Error("Invalid signature hash length");return _t(N(o))}function On(e,t,n){const r=33+gn,s=Ee(t)?B.Compressed:B.Uncompressed,o=e+Or(s.toString(16))+n.data,i=N(o);if(i.byteLength>r)throw Error("Invalid signature hash length");return _t(i)}function Cs(e,t,n,r,s){const o=Ln(e,t,n,r),i=Pr(s,o),a=Dr(s),l=On(o,a,i);return{nextSig:i,nextSigHash:l}}function xn(e,t,n,r,s,o){const i=Ln(e,t,n,r),a=dt(Br(i,o,s)),l=On(i,a,o);return{pubKey:a,nextSigHash:l}}function _s(){const e=Dn(ee.SerializeP2PKH,"",0,0);return e.signer=xr().hash160,e.keyEncoding=B.Compressed,e.signature=kt(),e}function Vt(e,t,n){return Ce(e)?Ts(e,t,n):Es(e,t,n)}function Ts(e,t,n){const{pubKey:r,nextSigHash:s}=xn(t,n,e.fee,e.nonce,e.keyEncoding,e.signature),o=Ct(0,e.hashMode,1,[r]).hash160;if(o!==e.signer)throw new ne(`Signer hash does not equal hash of public key(s): ${o} != ${e.signer}`);return s}function Es(e,t,n){const r=[];let s=t,o=!1,i=0;for(const l of e.fields){let u;switch(l.contents.type){case re.PublicKey:Ee(l.contents)||(o=!0),u=l.contents;break;case re.MessageSignature:l.pubKeyEncoding===B.Uncompressed&&(o=!0);const{pubKey:d,nextSigHash:p}=xn(s,n,e.fee,e.nonce,l.pubKeyEncoding,l.contents);if(s=p,u=d,i+=1,i===65536)throw new ne("Too many signatures");break}r.push(u)}if(i!==e.signaturesRequired)throw new ne("Incorrect number of signatures");if(o&&e.hashMode===ee.SerializeP2SH)throw new ne("Uncompressed keys are not allowed in this hash mode");const a=Ct(0,e.hashMode,e.signaturesRequired,r).hash160;if(a!==e.signer)throw new ne(`Signer hash does not equal hash of public key(s): ${a} != ${e.signer}`);return s}function Un(e){return{authType:T.Standard,spendingCondition:e}}function Rn(e,t){return{authType:T.Sponsored,spendingCondition:e,sponsorSpendingCondition:t||Dn(ee.SerializeP2PKH,"0".repeat(66),0,0)}}function zt(e){if(e.spendingCondition)switch(e.authType){case T.Standard:return Un(qt(e.spendingCondition));case T.Sponsored:return Rn(qt(e.spendingCondition),_s());default:throw new Me("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}function $s(e,t){switch(e.authType){case T.Standard:return Vt(e.spendingCondition,t,T.Standard);case T.Sponsored:return Vt(e.spendingCondition,t,T.Standard);default:throw new Me("Invalid origin auth type")}}function As(e,t){switch(e.authType){case T.Standard:const n={...e.spendingCondition,fee:W(t,!1)};return{...e,spendingCondition:n};case T.Sponsored:const r={...e.sponsorSpendingCondition,fee:W(t,!1)};return{...e,sponsorSpendingCondition:r}}}function ks(e,t){const n={...e.spendingCondition,nonce:W(t,!1)};return{...e,spendingCondition:n}}function Is(e,t){const n={...e.sponsorSpendingCondition,nonce:W(t,!1)};return{...e,sponsorSpendingCondition:n}}function Ps(e,t){const n={...t,nonce:W(t.nonce,!1),fee:W(t.fee,!1)};return{...e,sponsorSpendingCondition:n}}function Ds(e){const t=[];switch(t.push(e.authType),e.authType){case T.Standard:t.push(ot(e.spendingCondition));break;case T.Sponsored:t.push(ot(e.spendingCondition)),t.push(ot(e.sponsorSpendingCondition));break}return ze(t)}function Ls(e){const t=e.readUInt8Enum(T,r=>{throw new Fe(`Could not parse ${r} as AuthType`)});let n;switch(t){case T.Standard:return n=at(e),Un(n);case T.Sponsored:n=at(e);const r=at(e);return Rn(n,r)}}class Os{constructor(t,n,r,s,o,i,a){if(this.version=t,this.auth=n,"amount"in r?this.payload={...r,amount:W(r.amount,!1)}:this.payload=r,this.chainId=a??Mr,this.postConditionMode=o??Sn.Deny,this.postConditions=s??mn([]),i)this.anchorMode=Kr(i);else switch(r.payloadType){case J.Coinbase:case J.CoinbaseToAltRecipient:case J.NakamotoCoinbase:case J.PoisonMicroblock:case J.TenureChange:this.anchorMode=pt.OnChainOnly;break;case J.ContractCall:case J.SmartContract:case J.VersionedSmartContract:case J.TokenTransfer:this.anchorMode=pt.Any;break}}signBegin(){const t=ft(this);return t.auth=zt(t.auth),t.txid()}verifyBegin(){const t=ft(this);return t.auth=zt(t.auth),t.txid()}verifyOrigin(){return $s(this.auth,this.verifyBegin())}signNextOrigin(t,n){if(this.auth.spendingCondition===void 0)throw new Error('"auth.spendingCondition" is undefined');if(this.auth.authType===void 0)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,t,T.Standard,n)}signNextSponsor(t,n){if(this.auth.authType===T.Sponsored)return this.signAndAppend(this.auth.sponsorSpendingCondition,t,T.Sponsored,n);throw new Error('"auth.sponsorSpendingCondition" is undefined')}appendPubkey(t){const n=this.auth.spendingCondition;if(n&&!Ce(n)){const r=Ee(t);n.fields.push(Nt(r?B.Compressed:B.Uncompressed,t))}else throw new Error("Can't append public key to a singlesig condition")}signAndAppend(t,n,r,s){const{nextSig:o,nextSigHash:i}=Cs(n,r,t.fee,t.nonce,s);if(Ce(t))t.signature=o;else{const a=E(s.data).endsWith("01");t.fields.push(Nt(a?B.Compressed:B.Uncompressed,o))}return i}txid(){const t=this.serialize();return _t(t)}setSponsor(t){if(this.auth.authType!=T.Sponsored)throw new Me("Cannot sponsor sign a non-sponsored transaction");this.auth=Ps(this.auth,t)}setFee(t){this.auth=As(this.auth,t)}setNonce(t){this.auth=ks(this.auth,t)}setSponsorNonce(t){if(this.auth.authType!=T.Sponsored)throw new Me("Cannot sponsor sign a non-sponsored transaction");this.auth=Is(this.auth,t)}serialize(){if(this.version===void 0)throw new Se('"version" is undefined');if(this.chainId===void 0)throw new Se('"chainId" is undefined');if(this.auth===void 0)throw new Se('"auth" is undefined');if(this.anchorMode===void 0)throw new Se('"anchorMode" is undefined');if(this.payload===void 0)throw new Se('"payload" is undefined');const t=[];t.push(this.version);const n=new Uint8Array(4);return jr(n,this.chainId,0),t.push(n),t.push(Ds(this.auth)),t.push(this.anchorMode),t.push(this.postConditionMode),t.push(wn(this.postConditions)),t.push(Hr(this.payload)),ze(t)}}function xs(e){let t;typeof e=="string"?e.slice(0,2).toLowerCase()==="0x"?t=new nt(N(e.slice(2))):t=new nt(N(e)):e instanceof Uint8Array?t=new nt(e):t=e;const n=t.readUInt8Enum(Nr,u=>{throw new Error(`Could not parse ${u} as TransactionVersion`)}),r=t.readUInt32BE(),s=Ls(t),o=t.readUInt8Enum(pt,u=>{throw new Error(`Could not parse ${u} as AnchorMode`)}),i=t.readUInt8Enum(Sn,u=>{throw new Error(`Could not parse ${u} as PostConditionMode`)}),a=yn(t,re.PostCondition),l=Fr(t);return new Os(n,s,l,a,i,o,r)}const Us="https://browser.blockstack.org/auth",Rs={"@type":"Person","@context":"http://schema.org"},Bn=["store_write"],Bs="blockstack-session";class Je{constructor(t=Bn.slice(),n=(a=>(a=Tt("location",{returnEmptyObject:!0}))==null?void 0:a.origin)(),r="",s="/manifest.json",o=void 0,i=Us){this.appDomain=n,this.scopes=t,this.redirectPath=r,this.manifestPath=s,this.coreNode=o,this.authenticatorURL=i}redirectURI(){return`${this.appDomain}${this.redirectPath}`}manifestURI(){return`${this.appDomain}${this.manifestPath}`}}function Ns(){return typeof crypto<"u"&&typeof crypto.subtle<"u"}const Fs='Crypto lib not found. Either the WebCrypto "crypto.subtle" or Node.js "crypto" module must be available.';async function Ms(){if(Ns())return{lib:crypto.subtle,name:"subtleCrypto"};try{return{lib:require("crypto"),name:"nodeCrypto"}}catch{throw new Error(Fs)}}class Ks{constructor(t,n){this.createCipher=t,this.createDecipher=n}async encrypt(t,n,r,s){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);const o=this.createCipher(t,n,r),i=new Uint8Array(ce(o.update(s),o.final()));return Promise.resolve(i)}async decrypt(t,n,r,s){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);const o=this.createDecipher(t,n,r),i=new Uint8Array(ce(o.update(s),o.final()));return Promise.resolve(i)}}class js{constructor(t){this.subtleCrypto=t}async encrypt(t,n,r,s){let o,i;if(t==="aes-128-cbc")o="AES-CBC",i=128;else if(t==="aes-256-cbc")o="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["encrypt"]),l=await this.subtleCrypto.encrypt({name:o,iv:r},a,s);return new Uint8Array(l)}async decrypt(t,n,r,s){let o,i;if(t==="aes-128-cbc")o="AES-CBC",i=128;else if(t==="aes-256-cbc")o="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["decrypt"]),l=await this.subtleCrypto.decrypt({name:o,iv:r},a,s);return new Uint8Array(l)}}async function Nn(){const e=await Ms();return e.name==="subtleCrypto"?new js(e.lib):new Ks(e.lib.createCipheriv,e.lib.createDecipheriv)}const Hs=qr,qs="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Vs=Hs(qs);const zs=bn(Vs);function Js(e){return Vr(e)}function Fn(e){return le(e)}function Gs(e){return zr(e)}const Ws=0;ue.hmacSha256Sync=(e,...t)=>{const n=Et.create(le,e);return t.forEach(r=>n.update(r)),n.digest()};function Ys(){return E(ue.randomPrivateKey())}function Xs(e){const t=le(le(e));return zs.encode(ce(e,t).slice(0,e.length+4))}function Qs(e,t){return Xs(ce(new Uint8Array([e]),t.slice(0,20)))}function Mn(e,t=Ws){const n=typeof e=="string"?N(e):e,r=Js(Fn(n));return Qs(t,r)}function Kn(e){const t=vn(e);return E(Cn(t.slice(0,32),!0))}function Zs(e){return ue.isValidPrivateKey(vn(e))}ue.hmacSha256Sync=(e,...t)=>{const n=Et.create(le,e);return t.forEach(r=>n.update(r)),n.digest()};var Ke;(function(e){e.InvalidFormat="InvalidFormat",e.IsNotPoint="IsNotPoint"})(Ke||(Ke={}));async function ei(e,t,n){return await(await Nn()).encrypt("aes-256-cbc",t,e,n)}async function ti(e,t,n){return await(await Nn()).decrypt("aes-256-cbc",t,e,n)}function jn(e,t){return Et(le,e,t)}function ni(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function Hn(e){const t=Gs(e);return{encryptionKey:t.slice(0,32),hmacKey:t.slice(32)}}function ri(e){return e.match(/^[0-9a-f]+$/i)!==null}function si(e){const t={result:!1,reason_data:"Invalid public key format",reason:Ke.InvalidFormat},n={result:!1,reason_data:"Public key is not a point",reason:Ke.IsNotPoint};if(e.length!==66&&e.length!==130)return t;const r=e.slice(0,2);if(e.length===130&&r!=="04"||e.length===66&&r!=="02"&&r!=="03"||!ri(e))return t;try{return Yr.fromHex(e).assertValidity(),{result:!0,reason_data:null,reason:null}}catch{return n}}async function ii(e,t,n,r){const s=si(e);if(!s.result)throw s;const o=ue.randomPrivateKey(),i=Cn(o,!0);let a=_n(o,e,!0);a=a.slice(1);const l=Hn(a),u=ue.randomBytes(16),d=await ei(u,l.encryptionKey,t),p=ce(u,i,d),S=jn(l.hmacKey,p);let b;if(!r||r==="hex")b=E(d);else if(r==="base64")b=Jr(d);else throw new Error(`Unexpected cipherTextEncoding "${r}"`);const g={iv:E(u),ephemeralPK:E(i),cipherText:b,mac:E(S),wasString:n};return r&&r!=="hex"&&(g.cipherTextEncoding=r),g}async function qn(e,t){if(!t.ephemeralPK)throw new Ht("Unable to get public key from cipher object. You might be trying to decrypt an unencrypted object.");const n=t.ephemeralPK;let r=_n(e,n,!0);r=r.slice(1);const s=Hn(r),o=N(t.iv);let i;if(!t.cipherTextEncoding||t.cipherTextEncoding==="hex")i=N(t.cipherText);else if(t.cipherTextEncoding==="base64")i=Gr(t.cipherText);else throw new Error(`Unexpected cipherTextEncoding "${t.cipherText}"`);const a=ce(o,N(n),i),l=jn(s.hmacKey,a),u=N(t.mac);if(!ni(u,l))throw new Ht("Decryption failed: failure in MAC check");const d=await ti(o,s.encryptionKey,i);return t.wasString?Tn(d):d}function oi(e,t){const n=typeof t=="string"?vt(t):t,r=Kn(e),s=Fn(n),o=Wr(s,e);return{signature:E(o),publicKey:r}}async function ai(e,t){const n=Object.assign({},t);let r;if(!n.publicKey){if(!n.privateKey)throw new Error("Either public key or private key must be supplied for encryption.");n.publicKey=Kn(n.privateKey)}const s=typeof n.wasString=="boolean"?n.wasString:typeof e=="string",o=typeof e=="string"?vt(e):e,i=await ii(n.publicKey,o,s,n.cipherTextEncoding);let a=JSON.stringify(i);if(n.sign){typeof n.sign=="string"?r=n.sign:r||(r=n.privateKey);const l=oi(r,a),u={signature:l.signature,publicKey:l.publicKey,cipherText:a};a=JSON.stringify(u)}return a}function ci(e,t){const n=Object.assign({},t);if(!n.privateKey)throw new Error("Private key is required for decryption.");try{const r=JSON.parse(e);return qn(n.privateKey,r)}catch(r){throw r instanceof SyntaxError?new Error("Failed to parse encrypted content JSON. The content may not be encrypted. If using getFile, try passing { decrypt: false }."):r}}var L={},de={},x={};Object.defineProperty(x,"__esModule",{value:!0});x.decode=x.encode=x.unescape=x.escape=x.pad=void 0;const Vn=En;function It(e){return`${e}${"=".repeat(4-(e.length%4||4))}`}x.pad=It;function zn(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}x.escape=zn;function Jn(e){return It(e).replace(/-/g,"+").replace(/_/g,"/")}x.unescape=Jn;function li(e){return zn((0,Vn.fromByteArray)(new TextEncoder().encode(e)))}x.encode=li;function ui(e){return new TextDecoder().decode((0,Vn.toByteArray)(It(Jn(e))))}x.decode=ui;var Ge={},We={};const di=$t(Xr),fi=$t(Qr);var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.joseToDer=fe.derToJose=void 0;const Gn=En,Wn=x;function ct(e){return(e/8|0)+(e%8===0?0:1)}const pi={ES256:ct(256),ES384:ct(384),ES512:ct(521)};function Yn(e){const t=pi[e];if(t)return t;throw new Error(`Unknown algorithm "${e}"`)}const je=128,Xn=0,hi=32,yi=16,gi=2,Qn=yi|hi|Xn<<6,He=gi|Xn<<6;function Zn(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return(0,Gn.toByteArray)((0,Wn.pad)(e));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function mi(e,t){const n=Zn(e),r=Yn(t),s=r+1,o=n.length;let i=0;if(n[i++]!==Qn)throw new Error('Could not find expected "seq"');let a=n[i++];if(a===(je|1)&&(a=n[i++]),o-i<a)throw new Error(`"seq" specified length of "${a}", only "${o-i}" remaining`);if(n[i++]!==He)throw new Error('Could not find expected "int" for "r"');const l=n[i++];if(o-i-2<l)throw new Error(`"r" specified length of "${l}", only "${o-i-2}" available`);if(s<l)throw new Error(`"r" specified length of "${l}", max of "${s}" is acceptable`);const u=i;if(i+=l,n[i++]!==He)throw new Error('Could not find expected "int" for "s"');const d=n[i++];if(o-i!==d)throw new Error(`"s" specified length of "${d}", expected "${o-i}"`);if(s<d)throw new Error(`"s" specified length of "${d}", max of "${s}" is acceptable`);const p=i;if(i+=d,i!==o)throw new Error(`Expected to consume entire array, but "${o-i}" bytes remain`);const S=r-l,b=r-d,g=new Uint8Array(S+l+b+d);for(i=0;i<S;++i)g[i]=0;g.set(n.subarray(u+Math.max(-S,0),u+l),i),i=r;for(const $=i;i<$+b;++i)g[i]=0;return g.set(n.subarray(p+Math.max(-b,0),p+d),i),(0,Wn.escape)((0,Gn.fromByteArray)(g))}fe.derToJose=mi;function Jt(e,t,n){let r=0;for(;t+r<n&&e[t+r]===0;)++r;return e[t+r]>=je&&--r,r}function wi(e,t){e=Zn(e);const n=Yn(t),r=e.length;if(r!==n*2)throw new TypeError(`"${t}" signatures must be "${n*2}" bytes, saw "${r}"`);const s=Jt(e,0,n),o=Jt(e,n,e.length),i=n-s,a=n-o,l=1+1+i+1+1+a,u=l<je,d=new Uint8Array((u?2:3)+l);let p=0;return d[p++]=Qn,u?d[p++]=l:(d[p++]=je|1,d[p++]=l&255),d[p++]=He,d[p++]=i,s<0?(d[p++]=0,d.set(e.subarray(0,n),p),p+=n):(d.set(e.subarray(s,n),p),p+=n-s),d[p++]=He,d[p++]=a,o<0?(d[p++]=0,d.set(e.subarray(n),p)):d.set(e.subarray(n+o),p),d}fe.joseToDer=wi;var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.InvalidTokenError=Y.MissingParametersError=void 0;class Si extends Error{constructor(t){super(),this.name="MissingParametersError",this.message=t||""}}Y.MissingParametersError=Si;class bi extends Error{constructor(t){super(),this.name="InvalidTokenError",this.message=t||""}}Y.InvalidTokenError=bi;Object.defineProperty(We,"__esModule",{value:!0});We.SECP256K1Client=void 0;const vi=di,Ci=$n,Be=fi,Gt=fe,Wt=Y,Yt=Zr;Be.utils.hmacSha256Sync=(e,...t)=>{const n=vi.hmac.create(Ci.sha256,e);return t.forEach(r=>n.update(r)),n.digest()};class er{static derivePublicKey(t,n=!0){return t.length===66&&(t=t.slice(0,64)),t.length<64&&(t=t.padStart(64,"0")),(0,Yt.bytesToHex)(Be.getPublicKey(t,n))}static signHash(t,n,r="jose"){if(!t||!n)throw new Wt.MissingParametersError("a signing input hash and private key are all required");const s=Be.signSync(t,n.slice(0,64),{der:!0,canonical:!1});if(r==="der")return(0,Yt.bytesToHex)(s);if(r==="jose")return(0,Gt.derToJose)(s,"ES256");throw Error("Invalid signature format")}static loadSignature(t){return(0,Gt.joseToDer)(t,"ES256")}static verifyHash(t,n,r){if(!t||!n||!r)throw new Wt.MissingParametersError("a signing input hash, der signature, and public key are all required");return Be.verify(n,t,r,{strict:!1})}}We.SECP256K1Client=er;er.algorithmName="ES256K";(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.cryptoClients=e.SECP256K1Client=void 0;const t=We;Object.defineProperty(e,"SECP256K1Client",{enumerable:!0,get:function(){return t.SECP256K1Client}});const n={ES256K:t.SECP256K1Client};e.cryptoClients=n})(Ge);var se={};const _i=$t(es);var Ti=G&&G.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(p){i(p)}}function l(d){try{u(r.throw(d))}catch(p){i(p)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(se,"__esModule",{value:!0});se.hashSha256Async=se.hashSha256=void 0;const Ei=$n;function tr(e){return(0,Ei.sha256)(e)}se.hashSha256=tr;function $i(e){return Ti(this,void 0,void 0,function*(){try{if(typeof crypto<"u"&&typeof crypto.subtle<"u"){const n=typeof e=="string"?new TextEncoder().encode(e):e,r=yield crypto.subtle.digest("SHA-256",n);return new Uint8Array(r)}else{const n=_i;if(!n.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(n.createHash("sha256").update(e).digest())}}catch(t){return console.log(t),console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(tr(e))}})}se.hashSha256Async=$i;var Ai=G&&G.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(p){i(p)}}function l(d){try{u(r.throw(d))}catch(p){i(p)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(de,"__esModule",{value:!0});de.TokenSigner=de.createUnsecuredToken=void 0;const yt=x,Xt=Ge,ki=Y,Qt=se;function gt(e,t){const n=[],r=yt.encode(JSON.stringify(t));n.push(r);const s=yt.encode(JSON.stringify(e));return n.push(s),n.join(".")}function Ii(e){return gt(e,{typ:"JWT",alg:"none"})+"."}de.createUnsecuredToken=Ii;class Pi{constructor(t,n){if(!(t&&n))throw new ki.MissingParametersError("a signing algorithm and private key are required");if(typeof t!="string")throw new Error("signing algorithm parameter must be a string");if(t=t.toUpperCase(),!Xt.cryptoClients.hasOwnProperty(t))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=Xt.cryptoClients[t],this.rawPrivateKey=n}header(t={}){const n={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},n,t)}sign(t,n=!1,r={}){const s=this.header(r),o=gt(t,s),i=(0,Qt.hashSha256)(o);return this.createWithSignedHash(t,n,s,o,i)}signAsync(t,n=!1,r={}){return Ai(this,void 0,void 0,function*(){const s=this.header(r),o=gt(t,s),i=yield(0,Qt.hashSha256Async)(o);return this.createWithSignedHash(t,n,s,o,i)})}createWithSignedHash(t,n,r,s,o){const i=this.cryptoClient.signHash(o,this.rawPrivateKey);return n?{header:[yt.encode(JSON.stringify(r))],payload:JSON.stringify(t),signature:[i]}:[s,i].join(".")}}de.TokenSigner=Pi;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.TokenVerifier=void 0;const Di=x,Zt=Ge,Li=Y,Oe=se;class Oi{constructor(t,n){if(!(t&&n))throw new Li.MissingParametersError("a signing algorithm and public key are required");if(typeof t!="string")throw"signing algorithm parameter must be a string";if(t=t.toUpperCase(),!Zt.cryptoClients.hasOwnProperty(t))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=Zt.cryptoClients[t],this.rawPublicKey=n}verify(t){return typeof t=="string"?this.verifyCompact(t,!1):typeof t=="object"?this.verifyExpanded(t,!1):!1}verifyAsync(t){return typeof t=="string"?this.verifyCompact(t,!0):typeof t=="object"?this.verifyExpanded(t,!0):Promise.resolve(!1)}verifyCompact(t,n){const r=t.split("."),s=r[0]+"."+r[1],o=i=>{const a=this.cryptoClient.loadSignature(r[2]);return this.cryptoClient.verifyHash(i,a,this.rawPublicKey)};if(n)return(0,Oe.hashSha256Async)(s).then(i=>o(i));{const i=(0,Oe.hashSha256)(s);return o(i)}}verifyExpanded(t,n){const r=[t.header.join("."),Di.encode(t.payload)].join(".");let s=!0;const o=i=>(t.signature.map(a=>{const l=this.cryptoClient.loadSignature(a);this.cryptoClient.verifyHash(i,l,this.rawPublicKey)||(s=!1)}),s);if(n)return(0,Oe.hashSha256Async)(r).then(i=>o(i));{const i=(0,Oe.hashSha256)(r);return o(i)}}}Ye.TokenVerifier=Oi;var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.decodeToken=void 0;const xe=x;function xi(e){if(typeof e=="string"){const t=e.split("."),n=JSON.parse(xe.decode(t[0])),r=JSON.parse(xe.decode(t[1])),s=t[2];return{header:n,payload:r,signature:s}}else if(typeof e=="object"){if(typeof e.payload!="string")throw new Error("Expected token payload to be a base64 or json string");let t=e.payload;e.payload[0]!=="{"&&(t=xe.decode(t));const n=[];return e.header.map(r=>{const s=JSON.parse(xe.decode(r));n.push(s)}),{header:n,payload:JSON.parse(t),signature:e.signature}}}Xe.decodeToken=xi;(function(e){var t=G&&G.__createBinding||(Object.create?function(r,s,o,i){i===void 0&&(i=o);var a=Object.getOwnPropertyDescriptor(s,o);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,i,a)}:function(r,s,o,i){i===void 0&&(i=o),r[i]=s[o]}),n=G&&G.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(de,e),n(Ye,e),n(Xe,e),n(Y,e),n(Ge,e)})(L);function Ui(e){return`did:btc-addr:${e}`}function Ri(e){const t=e.split(":");if(t.length!==3)throw new jt("Decentralized IDs must have 3 parts");if(t[0].toLowerCase()!=="did")throw new jt('Decentralized IDs must start with "did"');return t[1].toLowerCase()}function nr(e){if(e)return Ri(e)==="btc-addr"?e.split(":")[2]:void 0}const Bi="1.4.0";function Ni(){return Ys()}function Fi(e,t,n,r=Bn.slice(),s,o=ns().getTime(),i={}){const a=b=>{const g=Tt("location",{throwIfUnavailable:!0,usageDesc:`makeAuthRequest([${b}=undefined])`});return g==null?void 0:g.origin};t||(t=`${a("redirectURI")}/`),n||(n=`${a("manifestURI")}/manifest.json`),s||(s=a("appDomain"));const l=Object.assign({},i,{jti:ts(),iat:Math.floor(new Date().getTime()/1e3),exp:Math.floor(o/1e3),iss:null,public_keys:[],domain_name:s,manifest_uri:n,redirect_uri:t,version:Bi,do_not_include_profile:!0,supports_hub_url:!0,scopes:r}),u=L.SECP256K1Client.derivePublicKey(e);l.public_keys=[u];const d=Mn(u);return l.iss=Ui(d),new L.TokenSigner("ES256k",e).sign(l)}async function en(e,t){const n=Tn(N(t)),r=JSON.parse(n),s=await qn(e,r);if(typeof s!="string")throw new Error("Unable to correctly decrypt private key");return s}function Mi(e){const t=L.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");const n=t.public_keys;if(n.length===1){const r=n[0];try{return new L.TokenVerifier("ES256k",r).verify(e)}catch{return!1}}else throw new Error("Multiple public keys are not supported")}function Ki(e){const t=L.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");const n=t.public_keys,r=nr(t.iss);if(n.length===1){if(Mn(n[0])===r)return!0}else throw new Error("Multiple public keys are not supported");return!1}function ji(e){const t=L.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");if(t.iat){if(typeof t.iat!="number")return!1;const n=new Date(t.iat*1e3);return!(new Date().getTime()<n.getTime())}else return!0}function Hi(e){const t=L.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");if(t.exp){if(typeof t.exp!="number")return!1;const n=new Date(t.exp*1e3);return!(new Date().getTime()>n.getTime())}else return!0}async function qi(e){return(await Promise.all([Hi(e),ji(e),Mi(e),Ki(e)])).every(n=>n)}const tn="1.0.0";class te{constructor(t){this.version=tn,this.userData=t.userData,this.transitKey=t.transitKey,this.etags=t.etags?t.etags:{}}static fromJSON(t){if(t.version!==tn)throw new ht(`JSON data version ${t.version} not supported by SessionData`);const n={coreNode:t.coreNode,userData:t.userData,transitKey:t.transitKey,etags:t.etags};return new te(n)}toString(){return JSON.stringify(this)}}class rr{constructor(t){if(t){const n=new te(t);this.setSessionData(n)}}getSessionData(){throw new Error("Abstract class")}setSessionData(t){throw new Error("Abstract class")}deleteSessionData(){throw new Error("Abstract class")}}class nn extends rr{constructor(t){super(t),this.sessionData||this.setSessionData(new te({}))}getSessionData(){if(!this.sessionData)throw new Pn("No session data was found.");return this.sessionData}setSessionData(t){return this.sessionData=t,!0}deleteSessionData(){return this.setSessionData(new te({})),!0}}class rn extends rr{constructor(t){if(super(t),t&&t.storeOptions&&t.storeOptions.localStorageKey&&typeof t.storeOptions.localStorageKey=="string"?this.key=t.storeOptions.localStorageKey:this.key=Bs,!localStorage.getItem(this.key)){const r=new te({});this.setSessionData(r)}}getSessionData(){const t=localStorage.getItem(this.key);if(!t)throw new Pn("No session data was found in localStorage");const n=JSON.parse(t);return te.fromJSON(n)}setSessionData(t){return localStorage.setItem(this.key,t.toString()),!0}deleteSessionData(){return localStorage.removeItem(this.key),this.setSessionData(new te({})),!0}}function Vi(e,t){const n=L.decodeToken(e),r=n.payload;if(typeof r=="string")throw new Error("Unexpected token payload type of string");if(r.hasOwnProperty("subject")&&r.subject){if(!r.subject.hasOwnProperty("publicKey"))throw new Error("Token doesn't have a subject public key")}else throw new Error("Token doesn't have a subject");if(r.hasOwnProperty("issuer")&&r.issuer){if(!r.issuer.hasOwnProperty("publicKey"))throw new Error("Token doesn't have an issuer public key")}else throw new Error("Token doesn't have an issuer");if(!r.hasOwnProperty("claim"))throw new Error("Token doesn't have a claim");const s=r.issuer.publicKey,o=rs(s);if(t!==s){if(t!==o)throw new Error("Token issuer public key does not match the verifying value")}const i=new L.TokenVerifier(n.header.alg,s);if(!i)throw new Error("Invalid token verifier");if(!i.verify(e))throw new Error("Token verification failed");return n}function zi(e,t=null){let n;t?n=Vi(e,t):n=L.decodeToken(e);let r={};if(n.hasOwnProperty("payload")){const s=n.payload;if(typeof s=="string")throw new Error("Unexpected token payload type of string");s.hasOwnProperty("claim")&&(r=s.claim)}return r}const sn="_blockstackDidCheckEchoReply",Ji="echoReply",Gi="authContinuation";function Wi(e){return e?(/^[?#]/.test(e)?e.slice(1):e).split("&").reduce((n,r)=>{const[s,o]=r.split("=");return n[s]=o?decodeURIComponent(o.replace(/\+/g," ")):"",n},{}):{}}function Yi(){let e;if(typeof self<"u")e=self;else if(typeof window<"u")e=window;else return!1;if(!e.location||!e.localStorage)return!1;const t=e[sn];if(typeof t=="boolean")return t;const n=Wi(e.location.search),r=n[Ji];if(r){e[sn]=!0;const s=`echo-reply-${r}`;return e.localStorage.setItem(s,"success"),e.setTimeout(()=>{const o=n[Gi];e.location.href=o},10),!0}return!1}class _e{constructor(t){let n=!0;if(typeof window>"u"&&typeof self>"u"&&(n=!1),t&&t.appConfig)this.appConfig=t.appConfig;else if(n)this.appConfig=new Je;else throw new ms("You need to specify options.appConfig");t&&t.sessionStore?this.store=t.sessionStore:n?t?this.store=new rn(t.sessionOptions):this.store=new rn:t?this.store=new nn(t.sessionOptions):this.store=new nn}makeAuthRequestToken(t,n,r,s,o,i=ss().getTime(),a={}){const l=this.appConfig;if(!l)throw new ht("Missing AppConfig");return t=t||this.generateAndStoreTransitKey(),n=n||l.redirectURI(),r=r||l.manifestURI(),s=s||l.scopes,o=o||l.appDomain,Fi(t,n,r,s,o,i,a)}generateAndStoreTransitKey(){const t=this.store.getSessionData(),n=Ni();return t.transitKey=n,this.store.setSessionData(t),n}getAuthResponseToken(){var r;const t=(r=Tt("location",{throwIfUnavailable:!0,usageDesc:"getAuthResponseToken"}))==null?void 0:r.search;return new URLSearchParams(t).get("authResponse")??""}isSignInPending(){try{if(Yi())return Ie.info("protocolEchoReply detected from isSignInPending call, the page is about to redirect."),!0}catch(t){Ie.error(`Error checking for protocol echo reply isSignInPending: ${t}`)}return!!this.getAuthResponseToken()}isUserSignedIn(){return!!this.store.getSessionData().userData}async handlePendingSignIn(t=this.getAuthResponseToken(),n=is()){const r=this.store.getSessionData();if(r.userData)throw new Le("Existing user session found.");const s=this.store.getSessionData().transitKey;let o=this.appConfig&&this.appConfig.coreNode;o||(o=new At().bnsLookupUrl);const i=L.decodeToken(t).payload;if(typeof i=="string")throw new Error("Unexpected token payload type of string");if(!await qi(t))throw new Le("Invalid authentication response.");let l=i.private_key,u=i.core_token;if(rt(i.version,"1.1.0"))if(s!==void 0&&s!=null){if(i.private_key!==void 0&&i.private_key!==null)try{l=await en(s,i.private_key)}catch{if(Ie.warn("Failed decryption of appPrivateKey, will try to use as given"),!Zs(i.private_key))throw new Le("Failed decrypting appPrivateKey. Usually means that the transit key has changed during login.")}if(u!=null)try{u=await en(s,u)}catch{Ie.info("Failed decryption of coreSessionToken, will try to use as given")}}else throw new Le("Authenticating with protocol > 1.1.0 requires transit key, and none found.");let d=os,p;rt(i.version,"1.2.0")&&i.hubUrl!==null&&i.hubUrl!==void 0&&(d=i.hubUrl),rt(i.version,"1.3.0")&&i.associationToken!==null&&i.associationToken!==void 0&&(p=i.associationToken);const S={profile:i.profile,email:i.email,decentralizedID:i.iss,identityAddress:nr(i.iss),appPrivateKey:l,coreSessionToken:u,authResponseToken:t,hubUrl:d,appPrivateKeyFromWalletSalt:i.appPrivateKeyFromWalletSalt,coreNode:i.blockstackAPIUrl,gaiaAssociationToken:p},b=i.profile_url;if(!S.profile&&b){const g=await n(b);if(!g.ok)S.profile=Object.assign({},Rs);else{const $=await g.text(),M=JSON.parse($);S.profile=zi(M[0].token)}}else S.profile=i.profile;return r.userData=S,this.store.setSessionData(r),S}loadUserData(){const t=this.store.getSessionData().userData;if(!t)throw new ht("No user data found. Did the user sign in?");return t}encryptContent(t,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),ai(t,r)}decryptContent(t,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),ci(t,r)}signUserOut(t){this.store.deleteSessionData(),t&&typeof location<"u"&&location.href&&(location.href=t)}}_e.prototype.makeAuthRequest=_e.prototype.makeAuthRequestToken;const Xi="connect-ui";let Ne,sr,ir=!1,mt=!1;const X=(e,t="")=>()=>{},Qi=(e,t)=>()=>{},Zi="{visibility:hidden}.hydrated{visibility:inherit}",on={},eo=e=>e!=null,Pt=e=>(e=typeof e,e==="object"||e==="function");function or(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const to=(e,t,...n)=>{let r=null,s=!1,o=!1;const i=[],a=u=>{for(let d=0;d<u.length;d++)r=u[d],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!Pt(r))&&(r=String(r)),s&&o?i[i.length-1].$text$+=r:i.push(s?wt(null,r):r),o=s)};if(a(n),t){const u=t.className||t.class;u&&(t.class=typeof u!="object"?u:Object.keys(u).filter(d=>u[d]).join(" "))}const l=wt(e,null);return l.$attrs$=t,i.length>0&&(l.$children$=i),l},wt=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n},no={},ro=e=>e&&e.$tag$===no,so=(e,t)=>(e!=null&&!Pt(e),e),Ia=e=>he(e).$hostElement$,io=(e,t,n)=>{const r=O.ce(t,n);return e.dispatchEvent(r),r},an=new WeakMap,oo=(e,t,n)=>{let r=qe.get(e);$o&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,qe.set(e,r)},ao=(e,t,n,r)=>{var s;let o=ar(t);const i=qe.get(o);if(e=e.nodeType===11?e:V,i)if(typeof i=="string"){e=e.head||e;let a=an.get(e),l;if(a||an.set(e,a=new Set),!a.has(o)){{l=V.createElement("style"),l.innerHTML=i;const u=(s=O.$nonce$)!==null&&s!==void 0?s:or(V);u!=null&&l.setAttribute("nonce",u),e.insertBefore(l,e.querySelector("link"))}a&&a.add(o)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,i]);return o},co=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,s=X("attachStyles",t.$tagName$),o=ao(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);r&10&&(n["s-sc"]=o,n.classList.add(o+"-h")),s()},ar=(e,t)=>"sc-"+e.$tagName$,cn=(e,t,n,r,s,o)=>{if(n!==r){let i=un(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=ln(n),d=ln(r);l.remove(...u.filter(p=>p&&!d.includes(p))),l.add(...d.filter(p=>p&&!u.includes(p)))}else if(!i&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):un(Qe,a)?t=a.slice(2):t=a[2]+t.slice(3),n&&O.rel(e,t,n,!1),r&&O.ael(e,t,r,!1);else{const l=Pt(r);if((i||l&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{const u=r??"";t==="list"?i=!1:(n==null||e[t]!=u)&&(e[t]=u)}}catch{}r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!i||o&4||s)&&!l&&(r=r===!0?"":r,e.setAttribute(t,r))}}},lo=/\s/,ln=e=>e?e.split(lo):[],cr=(e,t,n,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||on,i=t.$attrs$||on;for(r in o)r in i||cn(s,r,o[r],void 0,n,t.$flags$);for(r in i)cn(s,r,o[r],i[r],n,t.$flags$)},Dt=(e,t,n,r)=>{const s=t.$children$[n];let o=0,i,a;if(s.$text$!==null)i=s.$elm$=V.createTextNode(s.$text$);else if(i=s.$elm$=V.createElement(s.$tag$),cr(null,s,ir),eo(Ne)&&i["s-si"]!==Ne&&i.classList.add(i["s-si"]=Ne),s.$children$)for(o=0;o<s.$children$.length;++o)a=Dt(e,s,o),a&&i.appendChild(a);return i},lr=(e,t,n,r,s,o)=>{let i=e,a;for(i.shadowRoot&&i.tagName===sr&&(i=i.shadowRoot);s<=o;++s)r[s]&&(a=Dt(null,n,s),a&&(r[s].$elm$=a,i.insertBefore(a,t)))},ur=(e,t,n,r,s)=>{for(;t<=n;++t)(r=e[t])&&(s=r.$elm$,s.remove())},uo=(e,t,n,r)=>{let s=0,o=0,i=t.length-1,a=t[0],l=t[i],u=r.length-1,d=r[0],p=r[u],S;for(;s<=i&&o<=u;)a==null?a=t[++s]:l==null?l=t[--i]:d==null?d=r[++o]:p==null?p=r[--u]:Ue(a,d)?(ve(a,d),a=t[++s],d=r[++o]):Ue(l,p)?(ve(l,p),l=t[--i],p=r[--u]):Ue(a,p)?(ve(a,p),e.insertBefore(a.$elm$,l.$elm$.nextSibling),a=t[++s],p=r[--u]):Ue(l,d)?(ve(l,d),e.insertBefore(l.$elm$,a.$elm$),l=t[--i],d=r[++o]):(S=Dt(t&&t[o],n,o),d=r[++o],S&&a.$elm$.parentNode.insertBefore(S,a.$elm$));s>i?lr(e,r[u+1]==null?null:r[u+1].$elm$,n,r,o,u):o>u&&ur(t,s,i)},Ue=(e,t)=>e.$tag$===t.$tag$,ve=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,o=t.$text$;o===null?(cr(e,t,ir),r!==null&&s!==null?uo(n,r,t,s):s!==null?(e.$text$!==null&&(n.textContent=""),lr(n,null,t,s,0,s.length-1)):r!==null&&ur(r,0,r.length-1)):e.$text$!==o&&(n.data=o)},fo=(e,t)=>{const n=e.$hostElement$,r=e.$vnode$||wt(null,null),s=ro(t)?t:to(null,null,t);sr=n.tagName,s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=r.$elm$=n.shadowRoot||n,Ne=n["s-sc"],ve(r,s)},dr=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(n=>e.$onRenderResolve$=n))},Lt=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return dr(e,e.$ancestorComponent$),ko(()=>po(e,t))},po=(e,t)=>{const n=X("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$;let s;return n(),mo(s,()=>ho(e,r,t))},ho=async(e,t,n)=>{const r=e.$hostElement$,s=X("update",e.$cmpMeta$.$tagName$),o=r["s-rc"];n&&co(e);const i=X("render",e.$cmpMeta$.$tagName$);yo(e,t),o&&(o.map(a=>a()),r["s-rc"]=void 0),i(),s();{const a=r["s-p"],l=()=>go(e);a.length===0?l():(Promise.all(a).then(l),e.$flags$|=4,a.length=0)}},yo=(e,t,n)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,fo(e,t)}catch(r){Te(r,e.$hostElement$)}return null},go=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=X("postUpdate",t),s=e.$ancestorComponent$;e.$flags$&64?r():(e.$flags$|=64,pr(n),r(),e.$onReadyResolve$(n),s||fr()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&xt(()=>Lt(e,!1)),e.$flags$&=-517},fr=e=>{pr(V.documentElement),xt(()=>io(Qe,"appload",{detail:{namespace:Xi}}))},mo=(e,t)=>e&&e.then?e.then(t):t(),pr=e=>e.classList.add("hydrated"),wo=(e,t)=>he(e).$instanceValues$.get(t),So=(e,t,n,r)=>{const s=he(e),o=s.$instanceValues$.get(t),i=s.$flags$,a=s.$lazyInstance$;n=so(n);const l=Number.isNaN(o)&&Number.isNaN(n),u=n!==o&&!l;(!(i&8)||o===void 0)&&u&&(s.$instanceValues$.set(t,n),a&&(i&18)===2&&Lt(s,!1))},hr=(e,t,n)=>{if(t.$members$){const r=Object.entries(t.$members$),s=e.prototype;r.map(([o,[i]])=>{(i&31||n&2&&i&32)&&Object.defineProperty(s,o,{get(){return wo(this,o)},set(a){So(this,o,a)},configurable:!0,enumerable:!0})})}return e},bo=async(e,t,n,r,s)=>{if(!(t.$flags$&32)){{if(t.$flags$|=32,s=Eo(n),s.then){const l=Qi();s=await s,l()}s.isProxied||(hr(s,n,2),s.isProxied=!0);const a=X("createInstance",n.$tagName$);t.$flags$|=8;try{new s(t)}catch(l){Te(l)}t.$flags$&=-9,a()}if(s.style){let a=s.style;const l=ar(n);if(!qe.has(l)){const u=X("registerStyles",n.$tagName$);oo(l,a,!!(n.$flags$&1)),u()}}}const o=t.$ancestorComponent$,i=()=>Lt(t,!0);o&&o["s-rc"]?o["s-rc"].push(i):i()},vo=e=>{if(!(O.$flags$&1)){const t=he(e),n=t.$cmpMeta$,r=X("connectedCallback",n.$tagName$);if(!(t.$flags$&1)){t.$flags$|=1;{let s=e;for(;s=s.parentNode||s.host;)if(s["s-p"]){dr(t,t.$ancestorComponent$=s);break}}n.$members$&&Object.entries(n.$members$).map(([s,[o]])=>{if(o&31&&e.hasOwnProperty(s)){const i=e[s];delete e[s],e[s]=i}}),bo(e,t,n)}r()}},Co=e=>{O.$flags$&1||he(e)},_o=(e,t={})=>{var n;const r=X(),s=[],o=t.exclude||[],i=Qe.customElements,a=V.head,l=a.querySelector("meta[charset]"),u=V.createElement("style"),d=[];let p,S=!0;Object.assign(O,t),O.$resourcesUrl$=new URL(t.resourcesUrl||"./",V.baseURI).href,e.map(b=>{b[1].map(g=>{const $={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};$.$members$=g[2];const M=$.$tagName$,ye=class extends HTMLElement{constructor(Q){super(Q),Q=this,To(Q,$),$.$flags$&1&&Q.attachShadow({mode:"open"})}connectedCallback(){p&&(clearTimeout(p),p=null),S?d.push(this):O.jmp(()=>vo(this))}disconnectedCallback(){O.jmp(()=>Co(this))}componentOnReady(){return he(this).$onReadyPromise$}};$.$lazyBundleId$=b[0],!o.includes(M)&&!i.get(M)&&(s.push(M),i.define(M,hr(ye,$,1)))})});{u.innerHTML=s+Zi,u.setAttribute("data-styles","");const b=(n=O.$nonce$)!==null&&n!==void 0?n:or(V);b!=null&&u.setAttribute("nonce",b),a.insertBefore(u,l?l.nextSibling:a.firstChild)}S=!1,d.length?d.map(b=>b.connectedCallback()):O.jmp(()=>p=setTimeout(fr,30)),r()},Ot=new WeakMap,he=e=>Ot.get(e),Pa=(e,t)=>Ot.set(t.$lazyInstance$=e,t),To=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onReadyPromise$=new Promise(r=>n.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[],Ot.set(e,n)},un=(e,t)=>t in e,Te=(e,t)=>(0,console.error)(e,t),lt=new Map,Eo=(e,t,n)=>{const r=e.$tagName$.replace(/-/g,"_"),s=e.$lazyBundleId$,o=lt.get(s);if(o)return o[r];if(!n||!BUILD.hotModuleReplacement){const i=a=>(lt.set(s,a),a[r]);switch(s){case"connect-modal":return Ft(()=>import("./connect-modal.entry-b82b8bb4.js"),["assets/connect-modal.entry-b82b8bb4.js","assets/index-de2e9755.js","assets/index-f2d4ffa1.css"]).then(i,Te)}}return Ft(()=>import(`./${s}.entry.js`),[]).then(i=>(lt.set(s,i),i[r]),Te)},qe=new Map,Qe=typeof window<"u"?window:{},V=Qe.document||{head:{}},O={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},yr=e=>Promise.resolve(e),$o=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),dn=[],gr=[],Ao=(e,t)=>n=>{e.push(n),mt||(mt=!0,t&&O.$flags$&4?xt(St):O.raf(St))},fn=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Te(n)}e.length=0},St=()=>{fn(dn),fn(gr),(mt=dn.length>0)&&O.raf(St)},xt=e=>yr().then(e),ko=Ao(gr,!0),Io=()=>yr(),Po=(e,t)=>typeof window>"u"?Promise.resolve():Io().then(()=>_o([["connect-modal",[[1,"connect-modal",{authOptions:[16],hasOpenedInstall:[32],hasOpenedInstallXverse:[32]}]]]],t));(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();var Do=Object.defineProperty,Lo=Object.defineProperties,Oo=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,pn=(e,t,n)=>t in e?Do(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))mr.call(t,n)&&pn(e,n,t[n]);if(Ve)for(var n of Ve(t))wr.call(t,n)&&pn(e,n,t[n]);return e},ie=(e,t)=>Lo(e,Oo(t)),xo=(e,t)=>{var n={};for(var r in e)mr.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ve)for(var r of Ve(e))t.indexOf(r)<0&&wr.call(e,r)&&(n[r]=e[r]);return n};function Ut(){return window.StacksProvider||window.BlockstackProvider}var Sr="7.4.0";typeof window<"u"&&(window.__CONNECT_VERSION__=Sr);var Uo=e=>{if(!e){let t=new Je(["store_write"],document.location.href);e=new _e({appConfig:t})}return e},Ro=async(e,t=Ut())=>{if(!t)throw new Error("[Connect] No installed Stacks wallet found");let{redirectTo:n="/",manifestPath:r,onFinish:s,onCancel:o,sendToSignIn:i=!1,userSession:a,appDetails:l}=e,u=Uo(a);u.isUserSignedIn()&&u.signUserOut();let d=u.generateAndStoreTransitKey(),p=u.makeAuthRequest(d,`${document.location.origin}${n}`,`${document.location.origin}${r}`,u.appConfig.scopes,void 0,void 0,{sendToSignIn:i,appDetails:l,connectVersion:Sr});try{let S=await t.authenticationRequest(p);await u.handlePendingSignIn(S);let b=L.decodeToken(S),g=b==null?void 0:b.payload;s==null||s({authResponse:S,authResponsePayload:g,userSession:u})}catch(S){console.error("[Connect] Error during auth request",S),o==null||o()}},Bo=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function br(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n of e)t+=Bo[n];return t}function No(e){if(typeof e!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof e}`);let t=e.length%2?`0${e}`:e,n=new Uint8Array(t.length/2);for(let r=0;r<n.length;r++){let s=r*2,o=t.slice(s,s+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}var Fo=(e=>(e.ContractCall="contract_call",e.ContractDeploy="smart_contract",e.STXTransfer="token_transfer",e))(Fo||{}),Mo=(e=>(e.BUFFER="buffer",e.UINT="uint",e.INT="int",e.PRINCIPAL="principal",e.BOOL="bool",e))(Mo||{}),Rt=e=>{let t=e;if(!t){let n=new Je(["store_write"],document.location.href);t=new _e({appConfig:n})}return t};function Ko(e){try{return Rt(e).loadUserData().appPrivateKey}catch{return!1}}var jo=e=>{let t=Rt(e).loadUserData().appPrivateKey,n=L.SECP256K1Client.derivePublicKey(t);return{privateKey:t,publicKey:n}};function Ho(e){var t;let{stxAddress:n,userSession:r,network:s}=e;if(n)return n;if(!r||!s)return;let o=(t=r==null?void 0:r.loadUserData().profile)==null?void 0:t.stxAddress,i={[Mt.Mainnet]:"mainnet",[Mt.Testnet]:"testnet"};return o==null?void 0:o[i[s.chainId]]}function qo(e){let t=e.network||new An,n=Rt(e.userSession),r=ie(z({},e),{network:t,userSession:n});return z({stxAddress:Ho(r)},r)}function vr(e){return e.map(t=>br(cs(t)))}async function Vo(e,t){let{postConditions:n}=e;return n&&typeof n[0]!="string"&&(n=vr(n)),new L.TokenSigner("ES256k",t).signAsync(ie(z({},e),{postConditions:n}))}function zo(e){let{postConditions:t}=e;return t&&typeof t[0]!="string"&&(t=vr(t)),L.createUnsecuredToken(ie(z({},e),{postConditions:t}))}var Jo=async({token:e,options:t},n)=>{var r,s,o;try{let i=await n.transactionRequest(e),{txRaw:a}=i,l=No(a.replace(/^0x/,"")),u=xs(l);if("sponsored"in t&&t.sponsored){(r=t.onFinish)==null||r.call(t,ie(z({},i),{stacksTransaction:u}));return}(s=t.onFinish)==null||s.call(t,ie(z({},i),{stacksTransaction:u}))}catch(i){console.error("[Connect] Error during transaction request",i),(o=t.onCancel)==null||o.call(t)}},Go=async e=>{let t=e,{functionArgs:n,appDetails:r,userSession:s}=t,o=xo(t,["functionArgs","appDetails","userSession"]),i=n.map(l=>typeof l=="string"?l:br(as(l)));if(Ko(s)){let{privateKey:l,publicKey:u}=jo(s),d=ie(z({},o),{functionArgs:i,txType:"contract_call",publicKey:u});return r&&(d.appDetails=r),Vo(d,l)}let a=ie(z({},o),{functionArgs:i,txType:"contract_call"});return r&&(a.appDetails=r),zo(a)};async function Wo(e,t,n){let r=await t(z(z({},qo(e)),e));return Jo({token:r,options:e},n)}function Yo(e,t=Ut()){if(!t)throw new Error("[Connect] No installed Stacks wallet found");return Wo(e,Go,t)}var Xo=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY",e))(Xo||{}),Qo=(e,t=Ut())=>{if(t){Ro(e,t);return}if(typeof window!==void 0){Po();let n=document.createElement("connect-modal");n.authOptions=e,document.body.appendChild(n);let r=s=>{s.key==="Escape"&&(document.removeEventListener("keydown",r),n.remove())};document.addEventListener("keydown",r)}};const Zo=new Je(["store_write","publish_data"]),Ze=new _e({appConfig:Zo});function Cr(){return{name:"XCall",icon:"https://i.postimg.cc/yxXS7sCJ/XCall.png"}}function hn(){Qo({appDetails:Cr(),redirectTo:"/",onFinish:()=>{window.location.reload()},userSession:Ze})}function ea(){return Ze.loadUserData()}function ta(e){typeof e=="function"?this.$confirm("Sign in first.","Tips",{confirmButtonText:"Sign in",cancelButtonText:"No",type:"info",center:!0}).then(()=>{hn()}).catch(()=>{e()}):hn()}function na(){Ze.signUserOut(),window.location.reload()}let _r=null,Tr=null;_r=new At,Tr="https://api.mainnet.hiro.so";_r.coreApiUrl=Tr;function ra(){return ea().profile.stxAddress.mainnet}const q={alert(e,t){t||(t={}),ls.alert(e,t.title,{confirmButtonText:t.btnText?t.btnText:"Ok",dangerouslyUseHTMLString:!0})},tip(e,t){st({message:e,type:t})},tipOk(e,t){st({message:e,type:"success"})},tipErr(e){st({message:e,type:"error"})},alertInvalidAddress(){this.alert("Address invalid")},buffer2Str(e){e.startsWith("0x")&&(e=e.substr(2));let t="";for(let n=0;n<e.length;n+=2){const r=e.substr(n,2),s=parseInt(r,16);t+=String.fromCharCode(s)}return t},trimLower(e){return e&&e.trim().toLowerCase()},parseAddress(e){if(!e||e.trim().length<=0)return null;try{const t=e.trim().split(".");return t.length==1?kn(t[0]):In(t[0],t[1])}catch{return null}},thousandNumStr(e){return e.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,")},sip10BalanceToStr(e){for(e.length<7?e="0."+"0".repeat(6-e.length)+e:e=e.substring(0,e.length-6)+"."+e.substring(e.length-6);e.endsWith("0")&&e.length>1;)e=e.substring(0,e.length-1);return e.endsWith(".")&&(e=e.substring(0,e.length-1)),e},blobToBase64(e,t){const n=new FileReader;n.onload=function(){const s=n.result.split(",")[1];t(s)},n.readAsDataURL(e)},base64ToBlob(e,t){const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const s=new Uint8Array(r);return new Blob([s],{type:t})}};var bt={exports:{}};(function(e,t){var n=typeof self<"u"?self:G,r=function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o}();(function(o){(function(i){var a={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function l(c){return c&&DataView.prototype.isPrototypeOf(c)}if(a.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(c){return c&&u.indexOf(Object.prototype.toString.call(c))>-1};function p(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function S(c){return typeof c!="string"&&(c=String(c)),c}function b(c){var f={next:function(){var w=c.shift();return{done:w===void 0,value:w}}};return a.iterable&&(f[Symbol.iterator]=function(){return f}),f}function g(c){this.map={},c instanceof g?c.forEach(function(f,w){this.append(w,f)},this):Array.isArray(c)?c.forEach(function(f){this.append(f[0],f[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(f){this.append(f,c[f])},this)}g.prototype.append=function(c,f){c=p(c),f=S(f);var w=this.map[c];this.map[c]=w?w+", "+f:f},g.prototype.delete=function(c){delete this.map[p(c)]},g.prototype.get=function(c){return c=p(c),this.has(c)?this.map[c]:null},g.prototype.has=function(c){return this.map.hasOwnProperty(p(c))},g.prototype.set=function(c,f){this.map[p(c)]=S(f)},g.prototype.forEach=function(c,f){for(var w in this.map)this.map.hasOwnProperty(w)&&c.call(f,this.map[w],w,this)},g.prototype.keys=function(){var c=[];return this.forEach(function(f,w){c.push(w)}),b(c)},g.prototype.values=function(){var c=[];return this.forEach(function(f){c.push(f)}),b(c)},g.prototype.entries=function(){var c=[];return this.forEach(function(f,w){c.push([w,f])}),b(c)},a.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function $(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function M(c){return new Promise(function(f,w){c.onload=function(){f(c.result)},c.onerror=function(){w(c.error)}})}function ye(c){var f=new FileReader,w=M(f);return f.readAsArrayBuffer(c),w}function Q(c){var f=new FileReader,w=M(f);return f.readAsText(c),w}function ge(c){for(var f=new Uint8Array(c),w=new Array(f.length),P=0;P<f.length;P++)w[P]=String.fromCharCode(f[P]);return w.join("")}function $e(c){if(c.slice)return c.slice(0);var f=new Uint8Array(c.byteLength);return f.set(new Uint8Array(c)),f.buffer}function Ae(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:a.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:a.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():a.arrayBuffer&&a.blob&&l(c)?(this._bodyArrayBuffer=$e(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||d(c))?this._bodyArrayBuffer=$e(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var c=$(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?$(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ye)}),this.text=function(){var c=$(this);if(c)return c;if(this._bodyBlob)return Q(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ge(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(Er)}),this.json=function(){return this.text().then(JSON.parse)},this}var me=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(c){var f=c.toUpperCase();return me.indexOf(f)>-1?f:c}function j(c,f){f=f||{};var w=f.body;if(c instanceof j){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,f.headers||(this.headers=new g(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!w&&c._bodyInit!=null&&(w=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new g(f.headers)),this.method=h(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&w)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(w)}j.prototype.clone=function(){return new j(this,{body:this._bodyInit})};function Er(c){var f=new FormData;return c.trim().split("&").forEach(function(w){if(w){var P=w.split("="),A=P.shift().replace(/\+/g," "),C=P.join("=").replace(/\+/g," ");f.append(decodeURIComponent(A),decodeURIComponent(C))}}),f}function $r(c){var f=new g,w=c.replace(/\r?\n[\t ]+/g," ");return w.split(/\r?\n/).forEach(function(P){var A=P.split(":"),C=A.shift().trim();if(C){var ke=A.join(":").trim();f.append(C,ke)}}),f}Ae.call(j.prototype);function H(c,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new g(f.headers),this.url=f.url||"",this._initBody(c)}Ae.call(H.prototype),H.prototype.clone=function(){return new H(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},H.error=function(){var c=new H(null,{status:0,statusText:""});return c.type="error",c};var Ar=[301,302,303,307,308];H.redirect=function(c,f){if(Ar.indexOf(f)===-1)throw new RangeError("Invalid status code");return new H(null,{status:f,headers:{location:c}})},i.DOMException=o.DOMException;try{new i.DOMException}catch{i.DOMException=function(f,w){this.message=f,this.name=w;var P=Error(f);this.stack=P.stack},i.DOMException.prototype=Object.create(Error.prototype),i.DOMException.prototype.constructor=i.DOMException}function et(c,f){return new Promise(function(w,P){var A=new j(c,f);if(A.signal&&A.signal.aborted)return P(new i.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function ke(){C.abort()}C.onload=function(){var we={status:C.status,statusText:C.statusText,headers:$r(C.getAllResponseHeaders()||"")};we.url="responseURL"in C?C.responseURL:we.headers.get("X-Request-URL");var tt="response"in C?C.response:C.responseText;w(new H(tt,we))},C.onerror=function(){P(new TypeError("Network request failed"))},C.ontimeout=function(){P(new TypeError("Network request failed"))},C.onabort=function(){P(new i.DOMException("Aborted","AbortError"))},C.open(A.method,A.url,!0),A.credentials==="include"?C.withCredentials=!0:A.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&a.blob&&(C.responseType="blob"),A.headers.forEach(function(we,tt){C.setRequestHeader(tt,we)}),A.signal&&(A.signal.addEventListener("abort",ke),C.onreadystatechange=function(){C.readyState===4&&A.signal.removeEventListener("abort",ke)}),C.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return et.polyfill=!0,o.fetch||(o.fetch=et,o.Headers=g,o.Request=j,o.Response=H),i.Headers=g,i.Request=j,i.Response=H,i.fetch=et,Object.defineProperty(i,"__esModule",{value:!0}),i})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t})(bt,bt.exports);var sa=bt.exports;const ut=bn(sa);const ia={name:"MainPage",components:{},data(){return{netType:"",curNetwork:null,coreApiUrl:"",curContractAddr:"",state:0,curContractPair:[],constList:[],varList:[],varDatas:{activeIndexList:[],loading:null,fetchAllIndexList:[],fetchAllFinishCount:0,fetchAllNextIndex:0},mapList:[],mapDatas:{activeIndexList:[],queryResult:{}},readFuncList:[],readFuncDatas:{activeIndexList:[],queryResult:{}},writeFuncList:[],writeFuncDatas:{activeIndexList:[]},curTab:"",directConvertCVTypes:{[y.Int]:!0,[y.UInt]:!0,[y.Buffer]:!0,[y.BoolTrue]:!0,[y.BoolFalse]:!0,[y.PrincipalStandard]:!0,[y.PrincipalContract]:!0,[y.StringASCII]:!0,[y.StringUTF8]:!0},historyDatas:{bVisible:!1,tableData:[]}}},async mounted(){const e=localStorage.getItem("netType");this.netType=e||"mainnet",this.updateNetwork();const t=localStorage.getItem("contract");this.curContractAddr=t||"",this.loadHistoryData()},computed:{bNeedSignIn(){return!Ze.isUserSignedIn()},curLoginAddress(){return this.bNeedSignIn?"":ra()},targetContractUrl(){if(this.netType=="mainnet")return`https://explorer.hiro.so/txid/${this.curContractAddr}?chain=mainnet`;if(this.netType=="testnet")return`https://explorer.hiro.so/txid/${this.curContractAddr}?chain=testnet`}},methods:{onClickLoginIn(){ta()},onClickLoginOut(){na()},resetBeforeLoad(){this.state=0,this.curContractPair.splice(0,this.curContractPair.length),this.constList.splice(0,this.constList.length),this.varList.splice(0,this.varList.length),this.varDatas.activeIndexList.splice(0,this.varDatas.activeIndexList.length),this.mapList.splice(0,this.mapList.length),this.mapDatas.activeIndexList.splice(0,this.mapDatas.activeIndexList.length),this.readFuncList.splice(0,this.readFuncList.length),this.readFuncDatas.activeIndexList.splice(0,this.readFuncDatas.activeIndexList.length),this.writeFuncList.splice(0,this.writeFuncList.length),this.writeFuncDatas.activeIndexList.splice(0,this.writeFuncDatas.activeIndexList.length)},onChangeNetwork(){this.updateNetwork(),localStorage.setItem("netType",this.netType)},updateNetwork(){this.curNetwork=null;const e=localStorage.getItem(this.netType);this.netType=="mainnet"?(this.coreApiUrl=e||"https://api.hiro.so",this.curNetwork=new At):this.netType=="testnet"&&(this.coreApiUrl=e||"https://api.testnet.hiro.so",this.curNetwork=new An),this.curNetwork.coreApiUrl=this.coreApiUrl},onChangeCoreApi(){this.curNetwork.coreApiUrl=this.coreApiUrl,localStorage.setItem(this.netType,this.coreApiUrl)},async onClickLoadContract(){if(this.resetBeforeLoad(),this.state=1,!this.trContract(this.curContractAddr)){q.tipErr("Invalid contract address");return}let e=this.createLoading("Loading"),[t,n]=this.curContractAddr.split(".");this.curContractPair.push(t,n);try{const r=await ut(`${this.coreApiUrl}/v2/contracts/interface/${t}/${n}`);e.close(),r.status==200?(localStorage.setItem("contract",this.curContractAddr),this.saveHistoryContracts(),this.state=2,this.queryContractABIFinish(await r.json())):q.tipErr(`Request fail, status=${r.status}`)}catch(r){e.close(),q.tipErr("Request fail, check console log"),console.error("error: request contract interface error:",r)}},queryContractABIFinish(e){for(let t of e.variables){const n=Object.assign({},t);n.unifyType=this.parseUnifyType(t.type),n.serverState=0,n.serverValue="",n.access=="constant"?this.constList.push(n):n.access=="variable"&&this.varList.push(n)}for(let t of e.maps){const n=Object.assign({},t);n.unifyKeyType=this.parseUnifyType(n.key),n.keyAstType=this.parseTypeAst(n.key),n.unifyValueType=this.parseUnifyType(n.value),this.mapList.push(n)}for(let t of e.functions){const n=Object.assign({},t);let r=[],s=[];for(let o of n.args)o.unifyType=this.parseUnifyType(o.type),r.push(`(${o.name} ${o.unifyType})`),s.push({name:o.name,astType:this.parseTypeAst(o.type)});n.argAstList=s,n.paramsDesc=r.length>0?`${r.join(" ")}`:"none",n.resultType=this.parseUnifyType(n.outputs.type),n.access=="public"?this.writeFuncList.push(n):n.access=="read_only"&&this.readFuncList.push(n)}this.readFuncList.length>0?this.curTab="read":this.varList.length>0?this.curTab="variables":this.mapList.length>0?this.curTab="maps":this.writeFuncList.length>0?this.curTab="write":this.curTab="source"},onClickHistory(){this.historyDatas.bVisible=!0},onClickSelectContract(e){this.historyDatas.bVisible=!1,e&&e.netType&&e.address&&e.name&&(this.netType!=e.netType&&(this.netType=e.netType,this.onChangeNetwork()),this.curContractAddr=`${e.address}.${e.name}`,this.onClickLoadContract())},loadHistoryData(){this.historyDatas.tableData.splice(0,this.historyDatas.tableData.length);const e=localStorage.getItem("historyContracts");if(e){const t=JSON.parse(e);t&&this.historyDatas.tableData.push(...t)}},saveHistoryContracts(){let e=[];e.push({netType:this.netType,address:this.curContractPair[0],name:this.curContractPair[1]});for(const t of this.historyDatas.tableData)if((t.address!=this.curContractPair[0]||t.name!=this.curContractPair[1])&&(e.push(t),e.length>=15))break;this.historyDatas.tableData.splice(0,this.historyDatas.tableData.length),this.historyDatas.tableData.push(...e),localStorage.setItem("historyContracts",JSON.stringify(this.historyDatas.tableData))},resetFetchAllVarInfo(){this.varDatas.activeIndexList.splice(0,this.varDatas.activeIndexList.length),this.varDatas.loading&&(this.varDatas.loading.close(),this.varDatas.loading=null);let e=this.varDatas.fetchAllIndexList;e.splice(0,e.length),this.varDatas.fetchAllFinishCount=0,this.varDatas.fetchAllNextIndex=0},async onClickLoadAllVar(){this.resetFetchAllVarInfo();let e=this.varDatas.fetchAllIndexList;for(let n=0;n<this.varList.length;n++){const r=this.varList[n];r.serverState=0,r.serverValue="",e.push(n)}this.updateVarLoadingTip(!1,!0);const t=Math.min(8,e.length);this.varDatas.fetchAllNextIndex=t;for(let n=0;n<t;n++)this.fetchVar(e[n],!0)},updateVarLoadingTip(e,t){this.varDatas.loading||(this.varDatas.loading=this.createLoading("","rgba(0,0,0,0.7)"));let n="";if(t){const r=this.varList.length-this.varDatas.fetchAllIndexList.length;n=`Loading ${Math.min(r+this.varDatas.fetchAllFinishCount+1,this.varList.length)}/${this.varList.length}`}else n="Loading";e&&(this.varDatas.loading.text=n+"(Blocked by server, wait 1 minute)"),this.varDatas.loading.text=n},async handleChangeVarCollapse(){for(let e of this.varDatas.activeIndexList){const t=this.varList[e];t.serverState&&t.serverState>0||await this.fetchVar(e,!1)}},async fetchVar(e,t){for(;;){let n=this.varList[e];try{n.serverState=1;const r=await ut(`${this.coreApiUrl}/v2/data_var/${this.curContractPair[0]}/${this.curContractPair[1]}/${n.name}`);if(r.status==200){n.serverState=2;const s=await r.json();n.serverValue=this.parseCVValue(Kt(s.data),n.unifyType)}else n.serverState=0,q.tipErr(`error: fetchVar ${n.name} error, status=${r.status}`)}catch(r){n.serverState=0,q.tipErr("Request fail, check console log"),console.error(`error: fetchVar ${n.name} error:`,r)}if(n.serverState==2){t&&(this.varDatas.fetchAllFinishCount++,this.updateVarLoadingTip(!1,t),this.varDatas.activeIndexList.indexOf(e)==-1&&this.varDatas.activeIndexList.push(e),this.varDatas.fetchAllNextIndex<this.varDatas.fetchAllIndexList.length?this.fetchVar(this.varDatas.fetchAllIndexList[this.varDatas.fetchAllNextIndex++],t):this.varDatas.fetchAllFinishCount==this.varDatas.fetchAllIndexList.length&&(this.varDatas.loading.close(),q.tipOk("Load finish")));break}else this.updateVarLoadingTip(!0,t),await new Promise(r=>setTimeout(r,5e3))}},parseCVValue(e,t){try{if(this.directConvertCVTypes[e.type]){const n=Re(e).toString();return e.type==y.StringASCII||e.type==y.StringUTF8?`"${n}"`:e.type==y.UInt?`u${n}`:e.type==y.PrincipalStandard||e.type==y.PrincipalContract?`'${n}`:n}if(e.type==y.OptionalNone)return"none";if(e.type==y.OptionalSome)return`(some ${this.parseCVValue(e.value)})`;if(e.type==y.ResponseOk)return`(ok ${this.parseCVValue(e.value)})`;if(e.type==y.ResponseErr)return`(err ${this.parseCVValue(e.value)})`;if(e.type==y.List){let n=[];for(const r of e.list)n.push(this.parseCVValue(r));return`(list ${n.join(" ")})`}if(e.type==y.Tuple){let n=[];for(const[r,s]of Object.entries(e.data))if(typeof s=="object"&&s.type!=null){const o=this.parseCVValue(s);n.push(`${r}: ${o}`)}return`{ ${n.join(", ")} }`}return`error: unknown clarity type ${e.type}`}catch(n){return console.log("parse value err: ",n),"parse error"}},async onClickQueryMap(e){this.mapDatas.queryResult[e]="	";const t=this.mapList[e];let n=this.$refs["map"+e][0];const[r,s]=n.getCvValue();if(s){this.mapDatas.queryResult[e]="",this.$alert(s,"error",{confirmButtonText:"Ok"});return}const o=ds(r);try{const i=await ut(`${this.coreApiUrl}/v2/map_entry/${this.curContractPair[0]}/${this.curContractPair[1]}/${t.name}`,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});if(i.status==200){const a=await i.json(),l=this.parseCVValue(Kt(a.data),t.unifyValueType);this.mapDatas.queryResult[e]=l}else this.mapDatas.queryResult[e]="",q.tipErr(`error: fetch map entry ${t.name} error, status=${i.status}`)}catch(i){this.mapDatas.queryResult[e]="",q.tipErr("Request fail, check console log"),console.error(`error: fetch map entry ${t.name} error:`,i)}},async onClickCallReadonly(e){this.readFuncDatas.queryResult[e]="	";const t=this.readFuncList[e];let n=this.$refs["readfunc"+e][0];const[r,s]=n.getArgList();if(s){this.readFuncDatas.queryResult[e]="",this.$alert(s,"error",{confirmButtonText:"Ok"});return}try{const o={contractAddress:this.curContractPair[0],contractName:this.curContractPair[1],functionName:t.name,functionArgs:r,network:this.curNetwork,senderAddress:this.curContractPair[0]},i=await fs(o),a=this.parseCVValue(i,t.resultType);this.readFuncDatas.queryResult[e]=a}catch(o){this.readFuncDatas.queryResult[e]="",q.tipErr("Request fail, check console log"),console.error(`error: call read-only function ${t.name} fail, error:`,o)}},onClickCallPublic(e){const t=this.writeFuncList[e];let n=this.$refs["writefunc"+e][0];const[r,s]=n.getArgList();if(s){this.$alert(s,"Param error",{confirmButtonText:"Ok"});return}let o=this.$refs["postCond"+e][0];const[i,a,l]=o.getPostCondList();if(i){this.$alert(i,"Post condition error",{confirmButtonText:"Ok"});return}const u={contractAddress:this.curContractPair[0],contractName:this.curContractPair[1],functionName:t.name,functionArgs:r,network:this.curNetwork,appDetails:Cr(),postConditions:l,postConditionMode:parseInt(a),onFinish:d=>{q.alert("Transaction has been sent",{title:t.name})}};Yo(u)},parseUnifyType(e){if(e=="int128")return"int";if(e=="uint128")return"uint";if(typeof e=="object"){if(e.optional)return`(optional ${this.parseUnifyType(e.optional)})`;if(e.list){const t=this.parseUnifyType(e.list.type);return`(list ${e.list.length} ${t})`}if(e.buffer)return`(buff ${e.buffer.length})`;if(e["string-ascii"])return`(string-ascii ${e["string-ascii"].length})`;if(e["string-utf8"])return`(string-utf8 ${e["string-utf8"].length})`;if(e.tuple){let t=[];for(const n of e.tuple){const r=this.parseUnifyType(n.type);t.push(`${n.name}: ${r}`)}return`{${t.join(", ")}}`}if(e.response){const t=this.parseUnifyType(e.response.ok),n=this.parseUnifyType(e.response.error);return`(response ${t} ${n})`}}return e=="trait_reference"?"<trait>":e},parseTypeAst(e){if(e=="int128")return"int";if(e=="uint128")return"uint";if(typeof e=="object"){if(e.optional)return{combType:"optional",astType:this.parseTypeAst(e.optional)};if(e.list)return{combType:"list",astType:this.parseTypeAst(e.list.type),maxCount:e.list.length};if(e.buffer)return`(buff ${e.buffer.length})`;if(e["string-ascii"])return`(string-ascii ${e["string-ascii"].length})`;if(e["string-utf8"])return`(string-utf8 ${e["string-utf8"].length})`;if(e.tuple){let t=[];for(const n of e.tuple)t.push({name:n.name,astType:this.parseTypeAst(n.type)});return{combType:"tuple",fields:t}}}return e},async onClickCollapseAll(e){e.splice(0,e.length)},createLoading(e,t){return this.$loading({lock:!0,text:e,spinner:"el-icon-loading",background:t||"rgba(0, 0, 0, 0.05)"})},trEOA(e){let t=null;if(e)try{t=kn(realTargetAddr)}catch{t=null}return t},trContract(e){let t=null;if(e&&e.indexOf(".")!=-1)try{let[n,r]=e.split(".");t=In(n,r)}catch{t=null}return t},trPrinciple(e){let t=this.trEOA(e);return t||(t=this.trContract(e)),t}}},Bt=e=>(ys("data-v-15fe97df"),e=e(),gs(),e),oa={id:"main"},aa={key:0,style:{"margin-right":"8px"}},ca=Bt(()=>I("hr",null,null,-1)),la=Bt(()=>I("span",null,"Network:",-1)),ua=Bt(()=>I("span",null,"Contract:",-1)),da={style:{"margin-bottom":"8px"}},fa={class:"boldTitle"},pa={class:"queryResult"},ha={key:0},ya={key:0,class:"typeTip"},ga={style:{"margin-bottom":"8px"}},ma={class:"boldTitle"},wa={class:"typeTip"},Sa={class:"typeTip"},ba={key:0,class:"queryResult"},va={style:{"margin-bottom":"8px"}},Ca={class:"boldTitle"},_a={key:0,class:"queryResult"},Ta={style:{"margin-top":"8px","margin-bottom":"8px"}},Ea={class:"boldTitle"};function $a(e,t,n,r,s,o){const i=D("el-button"),a=D("el-option"),l=D("el-select"),u=D("el-input"),d=D("el-space"),p=D("el-collapse-item"),S=D("el-collapse"),b=D("el-tab-pane"),g=D("ASTItem"),$=D("ArgsItem"),M=D("el-alert"),ye=D("PostCondItem"),Q=D("el-tabs"),ge=D("el-table-column"),$e=D("el-table"),Ae=D("el-drawer"),me=ps("loading");return _(),K("div",oa,[I("div",null,[o.bNeedSignIn?R("",!0):(_(),K("span",aa,"Address: "+U(o.curLoginAddress),1)),o.bNeedSignIn?(_(),F(i,{key:1,type:"primary",onClick:o.onClickLoginIn},{default:m(()=>[k("Sign in")]),_:1},8,["onClick"])):R("",!0),o.bNeedSignIn?R("",!0):(_(),F(i,{key:2,type:"info",onClick:o.onClickLoginOut},{default:m(()=>[k("Sign out")]),_:1},8,["onClick"]))]),ca,v(d,{direction:"vertical",alignment:"start",size:"large"},{default:m(()=>[v(d,null,{default:m(()=>[la,v(l,{size:"large",style:{width:"120px"},modelValue:s.netType,"onUpdate:modelValue":t[0]||(t[0]=h=>s.netType=h),placeholder:"Please select",onChange:o.onChangeNetwork},{default:m(()=>[v(a,{value:"mainnet",label:"Mainnet"}),v(a,{value:"testnet",label:"Testnet"})]),_:1},8,["modelValue","onChange"]),v(u,{size:"large",style:{width:"500px"},clearable:"",placeholder:"coreApiUrl",modelValue:s.coreApiUrl,"onUpdate:modelValue":t[1]||(t[1]=h=>s.coreApiUrl=h),onChange:o.onChangeCoreApi},null,8,["modelValue","onChange"])]),_:1}),v(d,null,{default:m(()=>[ua,v(u,{size:"large",style:{width:"625px"},clearable:"",placeholder:"Contract address",modelValue:s.curContractAddr,"onUpdate:modelValue":t[2]||(t[2]=h=>s.curContractAddr=h)},null,8,["modelValue"]),v(i,{size:"large",type:"primary",disabled:s.curContractAddr.trim().length==0,onClick:o.onClickLoadContract},{default:m(()=>[k("Load")]),_:1},8,["disabled","onClick"]),v(i,{size:"large",type:"primary",plain:"",onClick:o.onClickHistory},{default:m(()=>[k("History")]),_:1},8,["onClick"])]),_:1})]),_:1}),v(Q,{modelValue:s.curTab,"onUpdate:modelValue":t[11]||(t[11]=h=>s.curTab=h),style:hs({visibility:s.state==2?"visible":"hidden"}),class:"tabArea"},{default:m(()=>[s.varList.length>0?(_(),F(b,{key:0,label:"Variables",name:"variables"},{default:m(()=>[I("div",da,[v(i,{type:"primary",plain:"",style:{display:"inline-block"},onClick:o.onClickLoadAllVar},{default:m(()=>[k("Load all")]),_:1},8,["onClick"]),v(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[3]||(t[3]=h=>o.onClickCollapseAll(s.varDatas.activeIndexList))},{default:m(()=>[k("Collapse all")]),_:1})]),v(S,{modelValue:s.varDatas.activeIndexList,"onUpdate:modelValue":t[4]||(t[4]=h=>s.varDatas.activeIndexList=h),onChange:o.handleChangeVarCollapse,class:"tabCollapse"},{default:m(()=>[(_(!0),K(Pe,null,De(s.varList.length,h=>(_(),F(p,{key:h-1,name:h-1},{title:m(()=>[I("span",fa,U(s.varList[h-1].name),1)]),default:m(()=>[it((_(),K("div",pa,[s.varList[h-1].serverState==2?(_(),K("div",ha,[k(U(s.varList[h-1].serverValue)+" ",1),s.varList[h-1].serverState==2?(_(),K("span",ya,""+U(s.varList[h-1].unifyType),1)):R("",!0)])):R("",!0)])),[[me,s.varList[h-1].serverState==1]])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})):R("",!0),s.mapList.length>0?(_(),F(b,{key:1,label:"Maps",name:"maps"},{default:m(()=>[I("div",ga,[v(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[5]||(t[5]=h=>o.onClickCollapseAll(s.mapDatas.activeIndexList))},{default:m(()=>[k("Collapse all")]),_:1})]),v(S,{modelValue:s.mapDatas.activeIndexList,"onUpdate:modelValue":t[6]||(t[6]=h=>s.mapDatas.activeIndexList=h),style:{"max-width":"660px"}},{default:m(()=>[(_(!0),K(Pe,null,De(s.mapList.length,h=>(_(),F(p,{key:h-1,name:h-1},{title:m(()=>[I("span",ma,U(s.mapList[h-1].name),1)]),default:m(()=>[I("span",wa,U(s.mapList[h-1].unifyKeyType),1),k(" => "),I("span",Sa,U(s.mapList[h-1].unifyValueType),1),v(g,{ref_for:!0,ref:"map"+(h-1),varAstType:s.mapList[h-1].keyAstType},null,8,["varAstType"]),v(i,{class:"queryBtn",type:"primary",plain:"",onClick:j=>o.onClickQueryMap(h-1)},{default:m(()=>[k("Query")]),_:2},1032,["onClick"]),s.mapDatas.queryResult[h-1]!=null?it((_(),K("div",ba,[k(U(s.mapDatas.queryResult[h-1]),1)])),[[me,s.mapDatas.queryResult[h-1]=="	"]]):R("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})):R("",!0),s.readFuncList.length>0?(_(),F(b,{key:2,label:"Read",name:"read"},{default:m(()=>[I("div",va,[v(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[7]||(t[7]=h=>o.onClickCollapseAll(s.readFuncDatas.activeIndexList))},{default:m(()=>[k("Collapse all")]),_:1})]),s.readFuncList.length>0?(_(),F(S,{key:0,modelValue:s.readFuncDatas.activeIndexList,"onUpdate:modelValue":t[8]||(t[8]=h=>s.readFuncDatas.activeIndexList=h),class:"tabCollapse"},{default:m(()=>[(_(!0),K(Pe,null,De(s.readFuncList.length,h=>(_(),F(p,{key:h-1,name:h-1},{title:m(()=>[I("span",Ca,U(s.readFuncList[h-1].name),1)]),default:m(()=>[v($,{ref_for:!0,ref:"readfunc"+(h-1),argList:s.readFuncList[h-1].argAstList},null,8,["argList"]),v(i,{type:"primary",class:"queryBtn",plain:"",onClick:j=>o.onClickCallReadonly(h-1)},{default:m(()=>[k("Query")]),_:2},1032,["onClick"]),s.readFuncDatas.queryResult[h-1]!=null?it((_(),K("div",_a,[k(U(s.readFuncDatas.queryResult[h-1]),1)])),[[me,s.readFuncDatas.queryResult[h-1]=="	"]]):R("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):R("",!0)]),_:1})):R("",!0),s.writeFuncList.length>0?(_(),F(b,{key:3,label:"Write",name:"write"},{default:m(()=>[v(M,{effect:"dark",title:"The sign-in account should match the account in wallet app.",type:"info",style:{width:"660px"}}),I("div",Ta,[o.bNeedSignIn?(_(),F(i,{key:0,type:"primary",onClick:o.onClickLoginIn},{default:m(()=>[k("Sign in")]),_:1},8,["onClick"])):R("",!0),v(i,{type:"info",plain:"",style:{display:"inline-block"},onClick:t[9]||(t[9]=h=>o.onClickCollapseAll(s.writeFuncDatas.activeIndexList))},{default:m(()=>[k("Collapse all")]),_:1})]),v(S,{modelValue:s.writeFuncDatas.activeIndexList,"onUpdate:modelValue":t[10]||(t[10]=h=>s.writeFuncDatas.activeIndexList=h),class:"tabCollapse"},{default:m(()=>[(_(!0),K(Pe,null,De(s.writeFuncList.length,h=>(_(),F(p,{key:h-1,name:h-1},{title:m(()=>[I("span",Ea,U(s.writeFuncList[h-1].name),1)]),default:m(()=>[v($,{ref_for:!0,ref:"writefunc"+(h-1),argList:s.writeFuncList[h-1].argAstList},null,8,["argList"]),v(ye,{ref_for:!0,ref:"postCond"+(h-1)},null,512),v(i,{disabled:o.bNeedSignIn,type:"primary",plain:"",onClick:j=>o.onClickCallPublic(h-1)},{default:m(()=>[k("Call")]),_:2},1032,["disabled","onClick"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})):R("",!0)]),_:1},8,["modelValue","style"]),v(Ae,{size:"700",modelValue:s.historyDatas.bVisible,"onUpdate:modelValue":t[12]||(t[12]=h=>s.historyDatas.bVisible=h),title:"History",direction:"rtl"},{default:m(()=>[v($e,{data:s.historyDatas.tableData,"highlight-current-row":"",onCurrentChange:o.onClickSelectContract},{default:m(()=>[v(ge,{label:"Contract name",width:"180"},{default:m(h=>[I("div",null,U(h.row.name),1)]),_:1}),v(ge,{label:"Contract address",width:"400"},{default:m(h=>[I("div",null,U(h.row.address),1)]),_:1}),v(ge,{label:"Chain"},{default:m(h=>[I("div",null,U(h.row.netType),1)]),_:1})]),_:1},8,["data","onCurrentChange"])]),_:1},8,["modelValue"])])}const Aa=us(ia,[["render",$a],["__scopeId","data-v-15fe97df"]]),Da=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"}));export{Da as M,Ia as g,to as h,Pa as r};
